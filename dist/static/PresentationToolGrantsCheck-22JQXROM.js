const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-5PEUte3J.js","static/sanity-BixSMB_v.js","static/LoaderQueries-DktD-yQm.js","static/utils-C3oyw5At.js","static/DisplayedDocumentBroadcaster-BoDdbX7M.js","static/LiveQueries-CKxFMnPM.js","static/PostMessageDocuments-B5T0eFtX.js","static/PostMessageRefreshMutations-M9-VPDN7.js","static/PostMessagePerspective-DqkFxEl1.js","static/PostMessagePreviewSnapshots-5KFkhpvn.js","static/PostMessageSchema-BzqZ1MZ_.js","static/PostMessageTelemetry-BOQrJrw8.js"])))=>i.map(i=>d[i]);
import{$ as jr,a0 as Er,a1 as $t,a2 as Rr,r as h,a3 as gn,a4 as Tr,j as u,a5 as Cr,a6 as On,a7 as pt,a8 as Me,a9 as qt,aa as Ir,ab as Ze,ac as $r,ad as Ln,ae as kt,af as kr,ag as Vt,ah as At,ai as Dn,aj as Gt,ak as Ar,al as Ft,am as Mr,an as Or,ao as Lr,ap as Dr,aq as zn,h as ue,b as D,ar as St,as as ot,at as Te,N as gt,T as V,o as Pe,n as Nn,u as ct,au as _t,av as Xt,aw as Wn,ax as we,ay as zr,az as Un,G as Nr,aA as nt,aB as qn,B as re,S as Re,C as le,aC as Vn,aD as Wr,aE as Bt,x as Ur,F as Q,aF as Qt,aG as qr,aH as Fn,aI as yn,aJ as Bn,aK as Vr,aL as Fr,m as yt,k as vt,aM as Hn,aN as Jt,aO as Kn,aP as Br,aQ as Se,aR as Gn,aS as jt,aT as Hr,aU as Kr,aV as Yt,aW as Xn,aX as Gr,aY as Xr,aZ as Qr,K as Jr,a_ as Zt,a$ as Yr,b0 as vn,b1 as Zr,b2 as es,b3 as ts,b4 as ns,b5 as rs,b6 as Qn,b7 as ss,b8 as en,I as as,a as is,b9 as Jn,ba as os,bb as cs,bc as ls,bd as us,be as ds,bf as ps,bg as Et,bh as Yn,bi as fs,bj as hs,bk as ms,bl as gs,bm as ys,bn as vs,A as bs,bo as xs,bp as ws,bq as Ps,br as Ss,y as _s,bs as js,bt as Es,bu as Rs,bv as bn,bw as Ts,bx as Cs,by as Is,bz as $s,bA as Zn,bB as er,bC as ks,bD as As,bE as Ms,bF as Os,t as Ls,bG as Ds}from"./sanity-BixSMB_v.js";import{i as zs,D as Ns}from"./DisplayedDocumentBroadcaster-BoDdbX7M.js";function Ws(t,e){return e===void 0&&(e=null),e=e??t,jr(function(n,s){var r=[],a=0;n.subscribe(Er(s,function(i){var o,c,l,p,d=null;a++%e===0&&r.push([]);try{for(var m=$t(r),f=m.next();!f.done;f=m.next()){var g=f.value;g.push(i),t<=g.length&&(d=d??[],d.push(g))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(c=m.return)&&c.call(m)}finally{if(o)throw o.error}}if(d)try{for(var y=$t(d),b=y.next();!b.done;b=y.next()){var g=b.value;Rr(r,g),s.next(g)}}catch(v){l={error:v}}finally{try{b&&!b.done&&(p=y.return)&&p.call(y)}finally{if(l)throw l.error}}},function(){var i,o;try{for(var c=$t(r),l=c.next();!l.done;l=c.next()){var p=l.value;s.next(p)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}s.complete()},void 0,function(){r=null}))})}function Us({children:t,isValidProp:e,...n}){e&&Cr(e),n={...h.useContext(gn),...n},n.isStatic=Tr(()=>n.isStatic);const s=h.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return u.jsx(gn.Provider,{value:s,children:t})}const tn="sanity.previewUrlSecret",tr="sanity-preview-url-secret",Le=`${tr}.share-access`,Xe="sanity.previewUrlShareAccess",Rt="2023-11-09",nn="sanity-preview-secret",rn="sanity-preview-pathname",st="sanity-preview-perspective",rt="x-vercel-protection-bypass",sn="x-vercel-set-bypass-cookie",nr=60*60,qs=`*[_id == "${Le}" && _type == "${Xe}"][0].secret`,Vs=`*[_type == "${tn}" && dateTime(_updatedAt) <= dateTime(now()) - ${nr}]`,Fs="sanity.vercelProtectionBypass",Bs=`${tr}.vercel-protection-bypass`,Hs=`*[_id == "${Bs}" && _type == "${Fs}"][0].secret`,an="sanity.preview-url-secret",Ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,on=/_key\s*==\s*['"](.*)['"]/,Gs=/^\d*:\d*$/;function cn(t){return typeof t=="number"||typeof t=="string"&&/^\[\d+\]$/.test(t)}function Tt(t){return typeof t=="string"?on.test(t.trim()):typeof t=="object"&&"_key"in t}function rr(t){if(typeof t=="string"&&Gs.test(t))return!0;if(!Array.isArray(t)||t.length!==2)return!1;const[e,n]=t;return(typeof e=="number"||e==="")&&(typeof n=="number"||n==="")}function Xs(t,e,n){const s=typeof e=="string"?sr(e):e;if(!Array.isArray(s))throw new Error("Path must be an array or a string");let r=t;for(let a=0;a<s.length;a++){const i=s[a];if(cn(i)){if(!Array.isArray(r))return n;r=r[i]}if(Tt(i)){if(!Array.isArray(r))return n;r=r.find(o=>o._key===i._key)}if(typeof i=="string"&&(r=typeof r=="object"&&r!==null?r[i]:void 0),typeof r>"u")return n}return r}function Qs(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((e,n,s)=>{const r=typeof n;if(r==="number")return`${e}[${n}]`;if(r==="string")return`${e}${s===0?"":"."}${n}`;if(Tt(n)&&n._key)return`${e}[_key=="${n._key}"]`;if(Array.isArray(n)){const[a,i]=n;return`${e}[${a}:${i}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function sr(t){if(typeof t!="string")throw new Error("Path is not a string");const e=t.match(Ks);if(!e)throw new Error("Invalid path string");return e.map(Js)}function Js(t){return cn(t)?Ys(t):Tt(t)?Zs(t):rr(t)?ea(t):t}function Ys(t){return Number(t.replace(/[^\d]/g,""))}function Zs(t){return{_key:t.match(on)[1]}}function ea(t){const[e,n]=t.split(":").map(s=>s===""?s:Number(s));return[e,n]}var ar=Object.freeze({__proto__:null,fromString:sr,get:Xs,isIndexSegment:cn,isIndexTuple:rr,isKeySegment:Tt,reKeySegment:on,toString:Qs});const ta="drafts",na="versions",at=".",bt=`${ta}${at}`,ir=`${na}${at}`;function or(t){return t.startsWith(bt)}function cr(t){return t.startsWith(ir)}function Xo(t){if(cr(t)){const e=lr(t);return bt+e}return or(t)?t:bt+t}function Qo(t,e){if(e==="drafts"||e==="published")throw new Error('Version can not be "published" or "drafts"');return`${ir}${e}${at}${lr(t)}`}function lr(t){return cr(t)?t.split(at).slice(2).join(at):or(t)?t.slice(bt.length):t}const xn={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},wn={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function ra(t){return`$${t.map(e=>typeof e=="string"?`['${e.replace(/[\f\n\r\t'\\]/g,n=>xn[n])}']`:typeof e=="number"?`[${e}]`:e._key!==""?`[?(@._key=='${e._key.replace(/['\\]/g,n=>xn[n])}')]`:`[${e._index}]`).join("")}`}function Jo(t){const e=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let s;for(;(s=n.exec(t))!==null;){if(s[1]!==void 0){const r=s[1].replace(/\\(\\|f|n|r|t|')/g,a=>wn[a]);e.push(r);continue}if(s[2]!==void 0){e.push(parseInt(s[2],10));continue}if(s[3]!==void 0){const r=s[3].replace(/\\(\\')/g,a=>wn[a]);e.push({_key:r,_index:-1});continue}}return e}function sa(t){return t.map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(e._index!==-1)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function Yo(t,e){if(!(e!=null&&e.mappings))return;const n=ra(sa(t));if(e.mappings[n]!==void 0)return{mapping:e.mappings[n],matchedPath:n,pathSuffix:""};const s=Object.entries(e.mappings).filter(([o])=>n.startsWith(o)).sort(([o],[c])=>c.length-o.length);if(s.length==0)return;const[r,a]=s[0],i=n.substring(r.length);return{mapping:a,matchedPath:r,pathSuffix:i}}function aa(t){return t!==null&&Array.isArray(t)}function Pn(t){return typeof t=="object"&&t!==null}function et(t,e,n=[]){if(aa(t))return t.map((s,r)=>{if(Pn(s)){const a=s._key;if(typeof a=="string")return et(s,e,n.concat({_key:a,_index:r}))}return et(s,e,n.concat(r))});if(Pn(t)){if(t._type==="block"||t._type==="span"){const s={...t};return t._type==="block"?s.children=et(t.children,e,n.concat("children")):t._type==="span"&&(s.text=et(t.text,e,n.concat("text"))),s}return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,et(r,e,n.concat(s))]))}return e(t,n)}const te=[];for(let t=0;t<256;++t)te.push((t+256).toString(16).slice(1));function ia(t,e=0){return(te[t[e+0]]+te[t[e+1]]+te[t[e+2]]+te[t[e+3]]+"-"+te[t[e+4]]+te[t[e+5]]+"-"+te[t[e+6]]+te[t[e+7]]+"-"+te[t[e+8]]+te[t[e+9]]+"-"+te[t[e+10]]+te[t[e+11]]+te[t[e+12]]+te[t[e+13]]+te[t[e+14]]+te[t[e+15]]).toLowerCase()}let Mt;const oa=new Uint8Array(16);function ca(){if(!Mt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Mt=crypto.getRandomValues.bind(crypto)}return Mt(oa)}const la=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sn={randomUUID:la};function Qe(t,e,n){var r;if(Sn.randomUUID&&!t)return Sn.randomUUID();t=t||{};const s=t.random??((r=t.rng)==null?void 0:r.call(t))??ca();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ia(s)}const _n=t=>({context:e})=>{const{count:n,include:s,exclude:r,responseType:a="message.received"}=t;return{count:n,domain:e.domain,from:e.connectTo,include:s?Array.isArray(s)?s:[s]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:a,target:e.target,to:e.name}},ua=t=>e=>{const{data:n}=e;return(t.include.length?t.include.includes(n.type):!0)&&(t.exclude.length?!t.exclude.includes(n.type):!0)&&n.domain===t.domain&&n.from===t.from&&n.to===t.to&&(!t.target||e.source===t.target)},da=t=>e=>({type:t,message:e}),pa=Dr(()=>Ft(window,"message")),ur=t=>Ln(({input:e})=>pa.pipe(t?Vt(t):At(),Dn(ua(e)),Vt(da(e.responseType)),e.count?At(Ws(e.count),Ar(n=>n),Gt(e.count)):At())),ln="sanity/comlink",fa=3e3,ha=500,it="comlink/response",xt="comlink/heartbeat",un="comlink/disconnect",dn="comlink/handshake/syn",pn="comlink/handshake/syn-ack",fn="comlink/handshake/ack",ma=t=>e=>e.pipe(Gt(1),Vt(()=>{throw new Error(t)})),dr=()=>On({types:{},actors:{listen:Ln(({input:t})=>{const e=t.signal?Ft(t.signal,"abort").pipe(ma(`Request ${t.requestId} aborted`)):Mr,n=s=>{var r,a;return((r=s.data)==null?void 0:r.type)===it&&((a=s.data)==null?void 0:a.responseTo)===t.requestId&&!!s.source&&t.sources.has(s.source)};return Ft(window,"message").pipe(Dn(n),Gt(t.sources.size),Or(e))})},actions:{"send message":({context:t},e)=>{const{sources:n,targetOrigin:s}=t,{message:r}=e;n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},"on success":kt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.response&&((n=t.resolvable)==null||n.resolve(t.response)),{type:"request.success",requestId:e.id,response:t.response,responseTo:t.responseTo}}),"on fail":kt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${t.type}' on client '${t.from}' (ID: '${t.id}').`),(n=t.resolvable)==null||n.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":kt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return(n=t.resolvable)==null||n.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:t})=>t.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:t})=>t.responseTimeout??fa}}).createMachine({context:({input:t})=>({channelId:t.channelId,data:t.data,domain:t.domain,expectResponse:t.expectResponse??!1,from:t.from,id:`msg-${Qe()}`,parentRef:t.parentRef,resolvable:t.resolvable,response:null,responseTimeout:t.responseTimeout,responseTo:t.responseTo,signal:t.signal,sources:t.sources instanceof Set?t.sources:new Set([t.sources]),suppressWarnings:t.suppressWarnings,targetOrigin:t.targetOrigin,to:t.to,type:t.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:t})=>{const{channelId:e,data:n,domain:s,from:r,id:a,responseTo:i,to:o,type:c}=t;return{message:{channelId:e,data:n,domain:s,from:r,id:a,to:o,type:c,responseTo:i}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:t})=>({requestId:t.id,sources:t.sources,signal:t.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:qt({response:({event:t})=>t.data.data,responseTo:({event:t})=>t.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:t,self:e})=>({requestId:e.id,response:t.response,responseTo:t.responseTo})}),ga=kr(({sendBack:t,input:e})=>{const n=()=>{t(e.event)};e.immediate&&n();const s=setInterval(n,e.interval);return()=>{clearInterval(s)}}),wt=()=>On({types:{},actors:{requestMachine:dr(),listen:ur(),sendBackAtInterval:ga},actions:{"buffer message":pt(({enqueue:t})=>{t.assign({buffer:({event:e,context:n})=>(Me(e,"post"),[...n.buffer,e.data])}),t.emit(({event:e})=>(Me(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":qt({requests:({context:t,event:e,self:n,spawn:s})=>{Me(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(a=>{const i=`req-${Qe()}`;return s("requestMachine",{id:i,input:{channelId:t.channelId,data:a.data,domain:t.domain,expectResponse:a.expectResponse,from:t.name,parentRef:n,responseTo:a.responseTo,sources:t.target,targetOrigin:t.targetOrigin,to:t.connectTo,type:a.type}})});return[...t.requests,...r]}}),"emit received message":pt(({enqueue:t})=>{t.emit(({event:e})=>(Me(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Ir((t,e)=>({type:"status",status:e.status})),"post message":Ze(({event:t})=>(Me(t,"post"),{type:"request",data:{data:t.data.data,expectResponse:!0,type:t.data.type}})),"remove request":pt(({context:t,enqueue:e,event:n})=>{Me(n,["request.success","request.failed","request.aborted"]),$r(n.requestId),e.assign({requests:t.requests.filter(({id:s})=>s!==n.requestId)})}),respond:Ze(({event:t})=>(Me(t,"response"),{type:"request",data:{data:t.data,type:it,responseTo:t.respondTo}})),"send handshake ack":Ze({type:"request",data:{type:fn}}),"send disconnect":Ze(()=>({type:"request",data:{type:un}})),"send handshake syn":Ze({type:"request",data:{type:dn}}),"send pending messages":pt(({enqueue:t})=>{t.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:n,type:s})=>({data:n,type:s}))})),t.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),t.assign({buffer:[]})}),"set target":qt({target:({event:t})=>(Me(t,"target.set"),t.target)})},guards:{"has target":({context:t})=>!!t.target,"should send heartbeats":({context:t})=>t.heartbeat}}).createMachine({id:"connection",context:({input:t})=>({id:t.id||`${t.name}-${Qe()}`,buffer:[],channelId:`chn-${Qe()}`,connectTo:t.connectTo,domain:t.domain??ln,heartbeat:t.heartbeat??!1,name:t.name,requests:[],target:t.target,targetOrigin:t.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:ha,immediate:!0})},{id:"listen for handshake",src:"listen",input:t=>_n({include:pn,count:1})(t)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:_n({exclude:[it,xt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:xt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),Ot=(t,e=wt())=>{const n=t.id||`${t.name}-${Qe()}`,s=Lr(e,{input:{...t,id:n}}),r=new Map,a=new Map,i=(g,y,b)=>{const v=r.get(g)||new Set;r.has(g)||r.set(g,v),v.add(y);const w=a.get(g);if(w){const P=(b==null?void 0:b.replay)??1;Array.from(w).slice(-P).forEach(async({data:_,id:S})=>{const T=await y(_);T&&s.send({type:"response",respondTo:S,data:T})}),a.delete(g)}return()=>{v.delete(y)}},o=()=>{s.send({type:"connect"})},c=()=>{s.send({type:"disconnect"})},l=(g,y)=>{const{unsubscribe:b}=s.on("status",v=>{y&&v.status!==y||g(v.status)});return b},p=g=>{s.send({type:"target.set",target:g})},d=(g,y)=>{const b={type:g,data:y};s.send({type:"post",data:b})};s.on("message",async({message:g})=>{const y=r.get(g.type);if(y){y.forEach(async v=>{const w=await v(g.data);w&&s.send({type:"response",respondTo:g.id,data:w})});return}const b=a.get(g.type);b?b.add(g):a.set(g.type,new Set([g]))});const m=()=>{s.stop()},f=()=>(s.start(),m);return{actor:s,connect:o,disconnect:c,id:n,name:t.name,machine:e,on:i,onStatus:l,post:d,setTarget:p,start:f,stop:m,get target(){return s.getSnapshot().context.target}}},Lt=t=>{t.disconnect(),setTimeout(()=>{t.stop()},0)},ya=()=>{},va=t=>{const{targetOrigin:e}=t,n=new Set,s=new Set;return{addTarget:r=>{if(n.has(r))return ya;if(!n.size||!s.size)return n.add(r),s.forEach(i=>{i.connections.forEach(o=>{o.setTarget(r),o.connect()})}),()=>{n.delete(r),s.forEach(i=>{i.connections.forEach(o=>{o.target===r&&o.disconnect()})})};n.add(r);const a=new Set;return s.forEach(i=>{const o=Ot({...i.input,target:r,targetOrigin:e},i.machine);a.add(o),i.connections.add(o),i.subscribers.forEach(({type:c,handler:l,unsubscribers:p})=>{p.push(o.on(c,l))}),i.internalEventSubscribers.forEach(({type:c,handler:l,unsubscribers:p})=>{p.push(o.actor.on(c,l).unsubscribe)}),i.statusSubscribers.forEach(({handler:c,unsubscribers:l})=>{l.push(o.onStatus(p=>c({connection:o.id,status:p})))}),o.start(),o.connect()}),()=>{n.delete(r),a.forEach(i=>{Lt(i),s.forEach(o=>{o.connections.delete(i)})})}},createChannel:(r,a=wt())=>{const i={connections:new Set,input:r,internalEventSubscribers:new Set,machine:a,statusSubscribers:new Set,subscribers:new Set};s.add(i);const{connections:o,internalEventSubscribers:c,statusSubscribers:l,subscribers:p}=i;if(n.size)n.forEach(b=>{const v=Ot({...r,target:b,targetOrigin:e},a);o.add(v)});else{const b=Ot({...r,targetOrigin:e},a);o.add(b)}const d=(...b)=>{const[v,w]=b;o.forEach(P=>{P.post(v,w)})},m=(b,v)=>{const w=[];o.forEach(_=>{w.push(_.on(b,v))});const P={type:b,handler:v,unsubscribers:w};return p.add(P),()=>{w.forEach(_=>_()),p.delete(P)}},f=(b,v)=>{const w=[];o.forEach(_=>{w.push(_.actor.on(b,v).unsubscribe)});const P={type:b,handler:v,unsubscribers:w};return c.add(P),()=>{w.forEach(_=>_()),c.delete(P)}},g=b=>{const v=[];o.forEach(P=>{v.push(P.onStatus(_=>b({connection:P.id,status:_})))});const w={handler:b,unsubscribers:v};return l.add(w),()=>{v.forEach(P=>P()),l.delete(w)}},y=()=>{const b=i.connections;b.forEach(Lt),b.clear(),s.delete(i)};return{on:m,onInternalEvent:f,onStatus:g,post:d,start:()=>(o.forEach(b=>{b.start(),b.connect()}),y),stop:y}},destroy:()=>{s.forEach(({connections:r})=>{r.forEach(Lt),r.clear()}),s.clear(),n.clear()}}},ba={"handshake/syn":dn,"handshake/syn-ack":pn,"handshake/ack":fn,"channel/response":it,"channel/heartbeat":xt,"channel/disconnect":un,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},xa={[dn]:"handshake/syn",[pn]:"handshake/syn-ack",[fn]:"handshake/ack",[it]:"channel/response",[xt]:"channel/heartbeat",[un]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},wa=t=>{const{data:e}=t;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=ln),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=ba[e.type]??e.type),t},Pa=t=>{const{channelId:e,...n}=t,s={...n,connectionId:e};return s.domain===ln&&(s.domain="sanity/channels"),s.to==="visual-editing"&&(s.to="overlays"),s.from==="visual-editing"&&(s.from="overlays"),s.type=xa[s.type]??s.type,s.type==="channel/response"&&s.responseTo&&!s.data&&(s.data={responseTo:s.responseTo}),(s.type==="handshake/syn"||s.type==="handshake/syn-ack"||s.type==="handshake/ack")&&(s.data={id:s.connectionId}),s},Sa=({context:t},e)=>{const{sources:n,targetOrigin:s}=t,r=Pa(e.message);n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},jn=()=>({listen:ur(wa),requestMachine:dr().provide({actions:{"send message":Sa}})});function _a(t){const e=new URL(t),{searchParams:n}=e;return n.delete(rn),n.delete(nn),n.delete(st),n.delete(rt),n.delete(sn),e}function ja(t,e,n,s){const r=new URL(t),{searchParams:a}=r;return e&&(a.set(nn,e),a.set(rn,n)),a.set(st,s),r}function pr(){if(typeof crypto<"u"){const t=new Uint8Array(16);crypto.getRandomValues(t);let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Ea(t,e,n,s){const r=t.withConfig({apiVersion:Rt}),a=pr(),i=r.patch(Le).set({secret:a,studioUrl:n,userId:s});return await r.transaction().createIfNotExists({_id:Le,_type:Xe,source:e,studioUrl:n,userId:s}).patch(i).commit({tag:an}),{secret:a}}async function Ra(t,e,n,s){const r=t.withConfig({apiVersion:Rt}),a=r.patch(Le).set({secret:null,studioUrl:n,userId:s});await r.transaction().createIfNotExists({_id:Le,_type:Xe,source:e,studioUrl:n,userId:s}).patch(a).commit({tag:an})}function Ta(t){for(var e=[],n=0;n<t.length;){var s=t[n];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(s==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(s==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(s===":"){for(var r="",a=n+1;a<t.length;){var i=t.charCodeAt(a);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){r+=t[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:r}),n=a;continue}if(s==="("){var o=1,c="",a=n+1;if(t[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<t.length;){if(t[a]==="\\"){c+=t[a++]+t[a++];continue}if(t[a]===")"){if(o--,o===0){a++;break}}else if(t[a]==="("&&(o++,t[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));c+=t[a++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(n));if(!c)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:c}),n=a;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function Ca(t,e){e===void 0&&(e={});for(var n=Ta(t),s=e.prefixes,r=s===void 0?"./":s,a=e.delimiter,i=a===void 0?"/#?":a,o=[],c=0,l=0,p="",d=function(j){if(l<n.length&&n[l].type===j)return n[l++].value},m=function(j){var x=d(j);if(x!==void 0)return x;var I=n[l],A=I.type,R=I.index;throw new TypeError("Unexpected ".concat(A," at ").concat(R,", expected ").concat(j))},f=function(){for(var j="",x;x=d("CHAR")||d("ESCAPED_CHAR");)j+=x;return j},g=function(j){for(var x=0,I=i;x<I.length;x++){var A=I[x];if(j.indexOf(A)>-1)return!0}return!1},y=function(j){var x=o[o.length-1],I=j||(x&&typeof x=="string"?x:"");if(x&&!I)throw new TypeError('Must have text between two parameters, missing text after "'.concat(x.name,'"'));return!I||g(I)?"[^".concat(Oe(i),"]+?"):"(?:(?!".concat(Oe(I),")[^").concat(Oe(i),"])+?")};l<n.length;){var b=d("CHAR"),v=d("NAME"),w=d("PATTERN");if(v||w){var P=b||"";r.indexOf(P)===-1&&(p+=P,P=""),p&&(o.push(p),p=""),o.push({name:v||c++,prefix:P,suffix:"",pattern:w||y(P),modifier:d("MODIFIER")||""});continue}var _=b||d("ESCAPED_CHAR");if(_){p+=_;continue}p&&(o.push(p),p="");var S=d("OPEN");if(S){var P=f(),T=d("NAME")||"",E=d("PATTERN")||"",C=f();m("CLOSE"),o.push({name:T||(E?c++:""),pattern:T&&!E?y(P):E,prefix:P,suffix:C,modifier:d("MODIFIER")||""});continue}m("END")}return o}function Ia(t,e){var n=[],s=hr(t,n,e);return $a(s,n,e)}function $a(t,e,n){n===void 0&&(n={});var s=n.decode,r=s===void 0?function(a){return a}:s;return function(a){var i=t.exec(a);if(!i)return!1;for(var o=i[0],c=i.index,l=Object.create(null),p=function(m){if(i[m]===void 0)return"continue";var f=e[m-1];f.modifier==="*"||f.modifier==="+"?l[f.name]=i[m].split(f.prefix+f.suffix).map(function(g){return r(g,f)}):l[f.name]=r(i[m],f)},d=1;d<i.length;d++)p(d);return{path:o,index:c,params:l}}}function Oe(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function fr(t){return t&&t.sensitive?"":"i"}function ka(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=n.exec(t.source);r;)e.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(t.source);return t}function Aa(t,e,n){var s=t.map(function(r){return hr(r,e,n).source});return new RegExp("(?:".concat(s.join("|"),")"),fr(n))}function Ma(t,e,n){return Oa(Ca(t,n),e,n)}function Oa(t,e,n){n===void 0&&(n={});for(var s=n.strict,r=s===void 0?!1:s,a=n.start,i=a===void 0?!0:a,o=n.end,c=o===void 0?!0:o,l=n.encode,p=l===void 0?function(x){return x}:l,d=n.delimiter,m=d===void 0?"/#?":d,f=n.endsWith,g=f===void 0?"":f,y="[".concat(Oe(g),"]|$"),b="[".concat(Oe(m),"]"),v=i?"^":"",w=0,P=t;w<P.length;w++){var _=P[w];if(typeof _=="string")v+=Oe(p(_));else{var S=Oe(p(_.prefix)),T=Oe(p(_.suffix));if(_.pattern)if(e&&e.push(_),S||T)if(_.modifier==="+"||_.modifier==="*"){var E=_.modifier==="*"?"?":"";v+="(?:".concat(S,"((?:").concat(_.pattern,")(?:").concat(T).concat(S,"(?:").concat(_.pattern,"))*)").concat(T,")").concat(E)}else v+="(?:".concat(S,"(").concat(_.pattern,")").concat(T,")").concat(_.modifier);else{if(_.modifier==="+"||_.modifier==="*")throw new TypeError('Can not repeat "'.concat(_.name,'" without a prefix and suffix'));v+="(".concat(_.pattern,")").concat(_.modifier)}else v+="(?:".concat(S).concat(T,")").concat(_.modifier)}}if(c)r||(v+="".concat(b,"?")),v+=n.endsWith?"(?=".concat(y,")"):"$";else{var C=t[t.length-1],j=typeof C=="string"?b.indexOf(C[C.length-1])>-1:C===void 0;r||(v+="(?:".concat(b,"(?=").concat(y,"))?")),j||(v+="(?=".concat(b,"|").concat(y,")"))}return new RegExp(v,fr(n))}function hr(t,e,n){return t instanceof RegExp?ka(t,e):Array.isArray(t)?Aa(t,e,n):Ma(t,e,n)}async function La(t,e,n,s,r=zn()){const a=t.withConfig({apiVersion:Rt});try{const i=new Date(Date.now()+1e3*nr),o=`drafts.${r}`,c=pr(),l=a.patch(o).set({secret:c,source:e,studioUrl:n,userId:s});return await a.transaction().createOrReplace({_id:o,_type:tn}).patch(l).commit({tag:an}),{secret:c,expiresAt:i}}finally{try{await a.delete({query:Vs})}catch(i){console.error("Failed to delete expired secrets",i)}}}function Da(t){const{draftMode:e,previewMode:n,origin:s=typeof location>"u"?"https://localhost":location.origin}=t,r=(n==null?void 0:n.enable)||(e==null?void 0:e.enable);let{preview:a="/"}=t;const i=new URL(a,s),o=r?new URL(r,s):void 0;return async c=>{try{if(c.previewSearchParam){const p=new URL(c.previewSearchParam,i);p.origin===i.origin&&(a=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===i.origin&&c.studioBasePath&&(a.startsWith(`${c.studioBasePath}/`)||a===c.studioBasePath)&&(a=t.preview||"/");const l=new URL(a,i);if(o){const p=new URL(o),{searchParams:d}=p;return d.set(nn,c.previewUrlSecret),d.set(st,c.studioPreviewPerspective),l.pathname!==p.pathname&&d.set(rn,`${l.pathname}${l.search}`),p.toString()}return l.toString()}}const za=t=>typeof t=="object"&&typeof t.then=="function",ft=[];function Na(t,e,n=(s,r)=>s===r){if(t===e)return!0;if(!t||!e)return!1;const s=t.length;if(e.length!==s)return!1;for(let r=0;r<s;r++)if(!n(t[r],e[r]))return!1;return!0}function Wa(t,e=null,n=!1,s={}){e===null&&(e=[t]);for(const a of ft)if(Na(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return s.lifespan&&s.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,s.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:s.equal,remove:()=>{const a=ft.indexOf(r);a!==-1&&ft.splice(a,1)},promise:(za(t)?t:t(...e)).then(a=>{r.response=a,s.lifespan&&s.lifespan>0&&(r.timeout=setTimeout(r.remove,s.lifespan))}).catch(a=>r.error=a)};if(ft.push(r),!n)throw r.promise}const mr=(t,e,n)=>Wa(t,e,!1,n);function Ua(t,e){let n=new AbortController,s=[];async function r(i,o){const{result:c,syncTags:l}=await t.fetch(Hs,{},{filterResponse:!1,lastLiveEventId:i,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(l)&&(s=l),o.aborted||e(c)}const a=t.live.events().subscribe({next:i=>{i.type==="message"&&(n.abort(),n=new AbortController,i.tags.some(o=>s.includes(o))&&r(i.id,n.signal))},error:i=>console.error(i)});return r(null,n.signal),()=>{a.unsubscribe(),n.abort()}}const qa=t=>{const e=D.c(3),{comlink:n}=t;let s,r;return e[0]!==n?(s=()=>n.on("visual-editing/features",Fa),r=[n],e[0]=n,e[1]=s,e[2]=r):(s=e[1],r=e[2]),h.useEffect(s,r),null};var Va=h.memo(qa);function Fa(){return{features:{optimistic:!0}}}function gr(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(t,s)},e)}}const Ba=function(t){const e=D.c(14),{comlink:n,children:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const a=h.useRef(r);let i,o;e[1]!==n?(i=()=>n==null?void 0:n.on("visual-editing/shared-state",()=>({state:a.current})),o=[n],e[1]=n,e[2]=i,e[3]=o):(i=e[2],o=e[3]),h.useEffect(i,o);let c;e[4]!==n?(c=(b,v)=>{a.current[b]=v,n==null||n.post("presentation/shared-state",{key:b,value:v})},e[4]=n,e[5]=c):c=e[5];const l=c;let p;e[6]!==n?(p=b=>{n==null||n.post("presentation/shared-state",{key:b}),delete a.current[b]},e[6]=n,e[7]=p):p=e[7];const d=p;let m,f;e[8]!==d||e[9]!==l?(f={removeValue:d,setValue:l},e[8]=d,e[9]=l,e[10]=f):f=e[10],m=f;const g=m;let y;return e[11]!==s||e[12]!==g?(y=u.jsx(ss.Provider,{value:g,children:s}),e[11]=s,e[12]=g,e[13]=y):y=e[13],y},Ha=ue.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,hn=function(t){const e=D.c(15),{children:n,defaultSize:s,id:r,minWidth:a,maxWidth:i,order:o}=t,c=s===void 0?null:s,l=o===void 0?0:o,p=h.useContext(en);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:m,unregisterElement:f}=p;let g;e[0]!==d||e[1]!==r?(g=d(r),e[0]=d,e[1]=r,e[2]=g):g=e[2];const y=g;let b,v;e[3]!==c||e[4]!==r||e[5]!==i||e[6]!==a||e[7]!==l||e[8]!==m||e[9]!==f?(b=()=>(m(r,{id:r,type:"panel",defaultSize:c,maxWidth:i??null,minWidth:a??0,order:l}),()=>{f(r)}),v=[r,c,l,i,a,m,f],e[3]=c,e[4]=r,e[5]=i,e[6]=a,e[7]=l,e[8]=m,e[9]=f,e[10]=b,e[11]=v):(b=e[10],v=e[11]),h.useLayoutEffect(b,v);let w;return e[12]!==n||e[13]!==y?(w=u.jsx(Ha,{style:y,children:n}),e[12]=n,e[13]=y,e[14]=w):w=e[14],w},yr="presentation/panels",vr=()=>JSON.parse(localStorage.getItem(yr)||"{}"),Ka=t=>{localStorage.setItem(yr,JSON.stringify(t))},br=t=>t.map(e=>[e.id,e.order].join(":")).join(",");function Ga(){const t=D.c(1);let e;const n=Qa,s=Xa;let r;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const a=gr(s,100);r={get:n,set:s,setDebounced:a},t[0]=r}else r=t[0];return e=r,e}function Xa(t,e){const n=vr(),s=br(t),r={...n,[s]:e};Ka(r)}function Qa(t){const e=vr(),n=br(t);return Array.isArray(e[n])&&e[n].some(Ja)?void 0:e[n]}function Ja(t){return t===null}function Ht(t,e,n){const{maxWidth:s,minWidth:r}=t,a=s==null?100:s/n*100,i=r/n*100;return Math.min(a,Math.max(i,e))}function Ya(t,e,n,s,r,a){const{panels:i,widths:o}=r,{widths:c}=a,l=c||o,p=[...l];{const g=t<0?s:n,y=i.findIndex(w=>w.id===g.id),b=l[y],v=Ht(g,b+Math.abs(t),e);if(b===v)return l;t=t<0?b-v:v-b}let d=0,m=t<0?n:s,f=i.findIndex(g=>g.id===m.id);for(;;){const g=i[f],y=l[f],b=Math.abs(t)-Math.abs(d),v=Ht(g,y-b,e);if(y!==v&&(d+=y-v,p[f]=v,d.toPrecision(10).localeCompare(Math.abs(t).toPrecision(10),void 0,{numeric:!0})>=0))break;if(t<0){if(--f<0)break}else if(++f>=i.length)break}return d===0?l:(m=t<0?s:n,f=i.findIndex(g=>g.id===m.id),p[f]=l[f]+d,p)}function Za(t,e,n){if(t.length===1)return"100";const s=t.findIndex(a=>a.id===e),r=n[s];return r==null?"0":r.toPrecision(10)}function En(t,e,n=0,s=null){const r=t.clientX,a=(s||e.getBoundingClientRect()).left;return r-a-n}function Dt(t){return t.type==="panel"}function Rn(t){return t.type==="resizer"}function Tn(t){return Array.from(t.values()).sort(({order:e},{order:n})=>e==null&&n==null?0:e==null?-1:n==null?1:e-n)}function Cn(t,e,n){const s=e.reduce((i,o)=>i+o,0),r=[...e].map(i=>i/s*100);let a=0;for(let i=0;i<t.length;i++){const o=t[i],c=r[i],l=Ht(o,c,n);c!=l&&(a+=c-l,r[i]=l)}if(a.toFixed(3)!=="0.000")for(let i=0;i<t.length;i++){const o=t[i];let{maxWidth:c,minWidth:l}=o;l=l/n*100,c!=null&&(c=c/n*100);const p=Math.min(c??100,Math.max(l,r[i]+a));if(p!==r[i]&&(a-=p-r[i],r[i]=p,Math.abs(a).toFixed(3)==="0.000"))break}return r}function ei(t){let e=t.length,n=100;const s=t.map(a=>a.defaultSize?(n-=a.defaultSize,e-=1,a.defaultSize):null),r=n/e;return s.map(a=>a===null?r:a)}const ti=ue.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,ni=function(t){const e=D.c(46),{children:n}=t,s=h.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[a,i]=h.useState(r);let o,c;e[1]!==a?(c=Tn(a).filter(Dt),e[1]=a,e[2]=c):c=e[2],o=c;const l=o;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,m]=h.useState(p),[f,g]=h.useState(null);let y;e[4]!==a||e[5]!==l||e[6]!==d?(y={elements:a,panels:l,widths:d},e[4]=a,e[5]=l,e[6]=d,e[7]=y):y=e[7];const b=h.useRef(y);let v;e[8]!==f||e[9]!==l||e[10]!==d?(v=B=>({flexGrow:Za(l,B,d),pointerEvents:f===null?void 0:"none"}),e[8]=f,e[9]=l,e[10]=d,e[11]=v):v=e[11];const w=v;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=(B,H)=>{i(F=>{if(F.has(B))return F;const X=new Map(F);return X.set(B,H),X})},e[12]=P):P=e[12];const _=P;let S;e[13]===Symbol.for("react.memo_cache_sentinel")?(S=B=>{i(H=>{if(!H.has(B))return H;const F=new Map(H);return F.delete(B),F})},e[13]=S):S=e[13];const T=S;let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=E):E=e[14];const C=h.useRef(E);let j;e[15]!==a?(j=(B,H)=>{const F=Tn(a),X=F.findIndex(Y=>Y.id===B),ce=a.get(B);if(!ce||!Rn(ce))return;const ee=ce.el.current;ee&&(C.current={resizerIndex:X,panelBefore:F.reduce((Y,J,ie)=>Dt(J)&&ie<X?J:Y,null),panelAfter:F.reduce((Y,J,ie)=>Y===null&&Dt(J)&&ie>X?J:Y,null),containerWidth:window.innerWidth,startX:H.pageX,dragOffset:En(H,ee),resizerRect:ee.getBoundingClientRect(),widths:b.current.widths},g(B))},e[15]=a,e[16]=j):j=e[16];const x=j;let I;e[17]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{g(null)},e[17]=I):I=e[17];const A=I;let R;e[18]!==a?(R=(B,H)=>{H.preventDefault(),H.stopPropagation();const{containerWidth:F,dragOffset:X,panelBefore:ce,panelAfter:ee,resizerRect:Y}=C.current;if(ce==null||ee==null)return;const J=a.get(B);if(!J||!Rn(J))return;const ie=J.el.current;if(!ie)return;const pe=En(H,ie,X,Y);if(pe===0)return;const{widths:ve}=b.current,fe=s.current.getBoundingClientRect(),be=pe/fe.width*100,he=Ya(be,F,ce,ee,b.current,C.current);ve.some((xe,me)=>xe!==he[me])&&m(he)},e[18]=a,e[19]=R):R=e[19];const k=R;let $,O;e[20]!==a||e[21]!==l||e[22]!==d?($=()=>{b.current.elements=a,b.current.panels=l,b.current.widths=d},O=[a,l,d],e[20]=a,e[21]=l,e[22]=d,e[23]=$,e[24]=O):($=e[23],O=e[24]),h.useLayoutEffect($,O);const z=Ga();let q,U;e[25]!==l||e[26]!==z?(q=()=>{const{widths:B}=b.current;if(B.length===l.length)return;const H=z.get(l);if(H){const X=Cn(l,H,window.innerWidth);m(X);return}const F=ei(l);m(F)},U=[z,l],e[25]=l,e[26]=z,e[27]=q,e[28]=U):(q=e[27],U=e[28]),h.useLayoutEffect(q,U);let G,K;e[29]!==l||e[30]!==z||e[31]!==d?(G=()=>{d.length&&z.setDebounced(l,d)},K=[z,l,d],e[29]=l,e[30]=z,e[31]=d,e[32]=G,e[33]=K):(G=e[32],K=e[33]),h.useEffect(G,K);let Z,se;e[34]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{const B=new ResizeObserver(()=>{const{panels:H,widths:F}=b.current,X=Cn(H,F,window.innerWidth);F.some((ce,ee)=>ce!==X[ee])&&m(X)});return B.observe(s.current),()=>{B.disconnect()}},se=[],e[34]=Z,e[35]=se):(Z=e[34],se=e[35]),h.useLayoutEffect(Z,se);let de,L;e[36]!==f||e[37]!==k||e[38]!==w||e[39]!==x?(L={activeResizer:f,drag:k,getPanelStyle:w,registerElement:_,startDragging:x,stopDragging:A,unregisterElement:T},e[36]=f,e[37]=k,e[38]=w,e[39]=x,e[40]=L):L=e[40],de=L;const ne=de;let ae;e[41]!==n?(ae=u.jsx(ti,{ref:s,children:n}),e[41]=n,e[42]=ae):ae=e[42];let oe;return e[43]!==ne||e[44]!==ae?(oe=u.jsx(en.Provider,{value:ne,children:ae}),e[43]=ne,e[44]=ae,e[45]=oe):oe=e[45],oe};function mn(t){const e=D.c(37);let n,s,r,a,i;e[0]!==t?({children:n,message:s,onRetry:a,onContinueAnyway:r,...i}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a,e[5]=i):(n=e[1],s=e[2],r=e[3],a=e[4],i=e[5]);const{t:o}=Pe(Se);let c;e[6]!==o?(c=o("error-card.retry-button.text"),e[6]=o,e[7]=c):c=e[7];let l;e[8]!==a||e[9]!==c?(l=u.jsx(we,{mode:"ghost",onClick:a,text:c}),e[8]=a,e[9]=c,e[10]=l):l=e[10];const p=l;let d;e[11]!==o?(d=o("error-card.continue-button.text"),e[11]=o,e[12]=d):d=e[12];let m;e[13]!==r||e[14]!==d?(m=u.jsx(we,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=m):m=e[15];const f=m;let g;e[16]!==o?(g=o("error-card.title"),e[16]=o,e[17]=g):g=e[17];let y;e[18]!==g?(y=u.jsx(V,{size:1,weight:"semibold",children:g}),e[18]=g,e[19]=y):y=e[19];let b;e[20]!==s?(b=u.jsx(V,{muted:!0,size:1,children:s}),e[20]=s,e[21]=b):b=e[21];let v;e[22]!==y||e[23]!==b?(v=u.jsxs(Re,{space:3,children:[y,b]}),e[22]=y,e[23]=b,e[24]=v):v=e[24];let w;e[25]!==f||e[26]!==r||e[27]!==a||e[28]!==p?(w=a&&r?u.jsxs(as,{space:2,children:[p,f]}):a?u.jsx(re,{children:p}):r?u.jsx(re,{children:f}):null,e[25]=f,e[26]=r,e[27]=a,e[28]=p,e[29]=w):w=e[29];let P;e[30]!==n||e[31]!==v||e[32]!==w?(P=u.jsx(Q,{align:"center",height:"fill",justify:"center",children:u.jsx(is,{padding:4,sizing:"border",width:0,children:u.jsxs(Re,{space:4,children:[v,n,w]})})}),e[30]=n,e[31]=v,e[32]=w,e[33]=P):P=e[33];let _;return e[34]!==i||e[35]!==P?(_=u.jsx(le,{height:"fill",...i,children:P}),e[34]=i,e[35]=P,e[36]=_):_=e[36],_}function ri(t={}){const e=Object.entries(t).map(([n,s])=>`${n}=${s}`).join("&");return e.length?`?${e}`:""}function si(t){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],n=Object.entries(t).filter(([s])=>e.includes(s)).reduce((s,[r,a])=>a==null?s:{...s,[r]:a},{});return ri(n)}const ai=h.forwardRef(function(t,e){const n=D.c(11);let s,r;n[0]!==t?({searchParams:r,...s}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==r?(a=Object.entries(r),n[3]=r,n[4]=a):a=n[4];let i;n[5]!==a?(i={type:void 0,_searchParams:a},n[5]=a,n[6]=i):i=n[6];let o;return n[7]!==e||n[8]!==s||n[9]!==i?(o=u.jsx(St,{...s,ref:e,state:i,title:void 0}),n[7]=e,n[8]=s,n[9]=i,n[10]=o):o=n[10],o}),ii=h.forwardRef(function(t,e){const n=D.c(15);let s,r,a,i;if(n[0]!==t){const{documentId:p,documentType:d,parentRefPath:m,template:f,searchParams:g,...y}=t;s=p,r=d,i=g,a=y,n[0]=t,n[1]=s,n[2]=r,n[3]=a,n[4]=i}else s=n[1],r=n[2],a=n[3],i=n[4];let o;n[5]!==i?(o=Object.entries(i),n[5]=i,n[6]=o):o=n[6];let c;n[7]!==s||n[8]!==r||n[9]!==o?(c={id:s,type:r,_searchParams:o},n[7]=s,n[8]=r,n[9]=o,n[10]=c):c=n[10];let l;return n[11]!==e||n[12]!==a||n[13]!==c?(l=u.jsx(St,{...a,ref:e,state:c,title:void 0}),n[11]=e,n[12]=a,n[13]=c,n[14]=l):l=n[14],l});function xr(t){const e=D.c(26),{children:n,onStructureParams:s,structureParams:r,searchParams:a,refs:i}=t,{state:o,resolvePathFromState:c}=Yt();let l;e[0]!==o._searchParams?(l=Object.fromEntries(o._searchParams||[]),e[0]=o._searchParams,e[1]=l):l=e[1];const p=Xn(l);let d;e[2]!==c||e[3]!==p||e[4]!==o?(d=C=>{const j=c(o),x=si({...p,...C});return`${j}${x}`},e[2]=c,e[3]=p,e[4]=o,e[5]=d):d=e[5];const m=d;let f,g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g={},e[6]=g):g=e[6];const y=r;let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[7]=b):b=e[7];let v;e[8]!==i||e[9]!==a?(v=C=>{const{childId:j,...x}=C,I=i==null?void 0:i.find(A=>A._id===j||Et(A._id)===j);return I?u.jsx(St,{...x,state:{id:j,type:I._type,_searchParams:Object.entries(a)}}):u.jsx("div",{...x})},e[8]=i,e[9]=a,e[10]=v):v=e[10];let w,P;e[11]!==a?(w=C=>u.jsx(ai,{...C,searchParams:a}),P=C=>u.jsx(ii,{...C,searchParams:a}),e[11]=a,e[12]=w,e[13]=P):(w=e[12],P=e[13]);let _;e[14]!==s?(_=C=>{s({...C,inspect:C.inspect??void 0})},e[14]=s,e[15]=_):_=e[15];let S;e[16]!==m||e[17]!==y||e[18]!==v||e[19]!==w||e[20]!==P||e[21]!==_?(S={index:0,groupIndex:0,siblingIndex:0,payload:g,params:y,hasGroupSiblings:!1,groupLength:1,routerPanesState:b,ChildLink:v,BackLink:w,ReferenceChildLink:P,ParameterizedLink:mi,closeCurrentAndAfter:hi,handleEditReference:fi,replaceCurrent:pi,closeCurrent:di,duplicateCurrent:ui,setView:li,setParams:_,setPayload:ci,navigateIntent:oi,createPathWithParams:m},e[16]=m,e[17]=y,e[18]=v,e[19]=w,e[20]=P,e[21]=_,e[22]=S):S=e[22],f=S;const T=f;let E;return e[23]!==n||e[24]!==T?(E=u.jsx(ks.Provider,{value:T,children:n}),e[23]=n,e[24]=T,e[25]=E):E=e[25],E}function oi(t,e,n){console.warn("navigateIntent",t,e,n)}function ci(t){console.warn("setPayload",t)}function li(t){console.warn("setView",t)}function ui(t){console.warn("duplicateCurrent",t)}function di(){console.warn("closeCurrent")}function pi(t){console.warn("replaceCurrent",t)}function fi(t){console.warn("handleEditReference",t)}function hi(){console.warn("closeCurrentAndAfter")}function mi(){throw new Error("ParameterizedLink not implemented")}const gi=ue(Jn)`
  height: 100%;
`,yi=ue(Q)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,vi=ue(vt)`
  white-space: pre-wrap;
`;function bi(t){var j,x,I,A;const e=D.c(33),{mainDocumentState:n,onStructureParams:s,searchParams:r,refs:a}=t,{t:i}=Pe(Se),{devMode:o}=Qt();let c,l;if(e[0]!==((j=n==null?void 0:n.document)==null?void 0:j._id)||e[1]!==a){let R;e[3]!==((x=n==null?void 0:n.document)==null?void 0:x._id)?(R=k=>{var $;return Et(k._id)!==(($=n==null?void 0:n.document)==null?void 0:$._id)},e[3]=(I=n==null?void 0:n.document)==null?void 0:I._id,e[4]=R):R=e[4],l=a.filter(R).map(wi),e[0]=(A=n==null?void 0:n.document)==null?void 0:A._id,e[1]=a,e[2]=l}else l=e[2];c=l;const p=c;let d,m;e[5]!==p?(m={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=m):m=e[6];let f;e[7]!==i?(f=i("document-list-pane.document-list.title"),e[7]=i,e[8]=f):f=e[8];let g;e[9]!==m||e[10]!==f?(g={id:"$root",options:m,schemaTypeName:"",title:f,type:"documentList"},e[9]=m,e[10]=f,e[11]=g):g=e[11],d=g;const y=d,[b,v]=h.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>v(null),e[12]=w):w=e[12];const P=w,[_]=h.useState(xi);let S;e[13]===Symbol.for("react.memo_cache_sentinel")?(S=()=>v(null),e[13]=S):S=e[13];let T;if(e[14]!==a?(T=[a],e[14]=a,e[15]=T):T=e[15],h.useEffect(S,T),b){let R;e[16]!==i?(R=i("document-list-pane.error.text"),e[16]=i,e[17]=R):R=e[17];let k;e[18]!==o||e[19]!==b||e[20]!==i?(k=o&&u.jsx(le,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Re,{space:3,children:[u.jsx(yt,{muted:!0,size:0,children:i("presentation-error.label")}),u.jsx(vi,{size:1,children:b.error.message})]})}),e[18]=o,e[19]=b,e[20]=i,e[21]=k):k=e[21];let $;return e[22]!==k||e[23]!==R?($=u.jsx(mn,{flex:1,message:R,onRetry:P,children:k}),e[22]=k,e[23]=R,e[24]=$):$=e[24],$}let E;e[25]!==y?(E=u.jsx(yi,{direction:"column",flex:1,children:u.jsx($s,{index:0,itemId:"$root",pane:y,paneKey:"$root"})}),e[25]=y,e[26]=E):E=e[26];let C;return e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==_||e[31]!==E?(C=u.jsx(Zn,{onCatch:v,children:u.jsx(gi,{children:u.jsx(er,{children:u.jsx(xr,{onStructureParams:s,structureParams:_,searchParams:r,refs:a,children:E})})})}),e[27]=s,e[28]=a,e[29]=r,e[30]=_,e[31]=E,e[32]=C):C=e[32],C}function xi(){return{}}function wi(t){return Et(t._id)}const Pi=ue(vt)`
  white-space: pre-wrap;
`;function Si(t){const e=D.c(35),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o}=t,{template:c,templateParams:l}=o,{t:p}=Pe(Se),{devMode:d}=Qt();let m,f;e[0]!==l?(f=As(l),e[0]=l,e[1]=f):f=e[1];let g;e[2]!==n||e[3]!==s||e[4]!==f||e[5]!==c?(g={id:n,type:s,template:c,templateParameters:f},e[2]=n,e[3]=s,e[4]=f,e[5]=c,e[6]=g):g=e[6];let y;e[7]!==n||e[8]!==g?(y={id:n,options:g,title:"",type:"document"},e[7]=n,e[8]=g,e[9]=y):y=e[9],m=y;const b=m,[v,w]=h.useState(null);let P;e[10]===Symbol.for("react.memo_cache_sentinel")?(P=()=>w(null),e[10]=P):P=e[10];const _=P;let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(null)},e[11]=S):S=e[11];let T;if(e[12]!==n||e[13]!==s||e[14]!==o?(T=[n,s,o],e[12]=n,e[13]=s,e[14]=o,e[15]=T):T=e[15],h.useEffect(S,T),v){let I;e[16]!==p?(I=p("document-pane.error.text"),e[16]=p,e[17]=I):I=e[17];let A;e[18]!==d||e[19]!==v||e[20]!==p?(A=d&&u.jsx(le,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Re,{space:3,children:[u.jsx(yt,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(Pi,{size:1,children:v.error.message})]})}),e[18]=d,e[19]=v,e[20]=p,e[21]=A):A=e[21];let R;return e[22]!==I||e[23]!==A?(R=u.jsx(mn,{flex:1,message:I,onRetry:_,children:A}),e[22]=I,e[23]=A,e[24]=R):R=e[24],R}let E;e[25]===Symbol.for("react.memo_cache_sentinel")?(E={height:"100%"},e[25]=E):E=e[25];let C;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx(Qn,{}),e[26]=C):C=e[26];let j;e[27]!==r||e[28]!==b?(j=u.jsx(h.Suspense,{fallback:C,children:u.jsx(Ds,{paneKey:"document",index:1,itemId:"document",pane:b,onFocusPath:r})}),e[27]=r,e[28]=b,e[29]=j):j=e[29];let x;return e[30]!==a||e[31]!==i||e[32]!==o||e[33]!==j?(x=u.jsx(Zn,{onCatch:w,children:u.jsx(Jn,{style:E,children:u.jsx(xr,{searchParams:i,onStructureParams:a,structureParams:o,children:j})})}),e[30]=a,e[31]=i,e[32]=o,e[33]=j,e[34]=x):x=e[34],x}function _i(t){const e=D.c(7),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o}=t;let c;return e[0]!==n||e[1]!==s||e[2]!==r||e[3]!==a||e[4]!==i||e[5]!==o?(c=u.jsx(er,{children:u.jsx(Si,{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o})}),e[0]=n,e[1]=s,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=c):c=e[6],c}function ji(t,e){const n=D.c(6),s=ws();let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r={},n[0]=r):r=n[0];const[a,i]=h.useState(r);let o,c;return n[1]!==t||n[2]!==s||n[3]!==e?(o=()=>{if(!e)return;const l=Ss(s,e,t,"").subscribe(p=>{i(p)});return()=>{l==null||l.unsubscribe()}},c=[s,e,t],n[1]=t,n[2]=s,n[3]=e,n[4]=o,n[5]=c):(o=n[4],c=n[5]),h.useEffect(o,c),a}function Ei(t){var E,C,j,x,I,A,R,k;const e=D.c(39),{documentId:n,documentType:s,mainDocumentState:r,onFocusPath:a,onStructureParams:i,refs:o,searchParams:c,structureParams:l}=t,{t:p}=Pe(Se),d=hs();let m;e[0]!==((E=r==null?void 0:r.document)==null?void 0:E._id)||e[1]!==((C=r==null?void 0:r.document)==null?void 0:C._type)||e[2]!==c?(m=$=>{var O,z;return u.jsx(St,{...$,state:{id:(O=r==null?void 0:r.document)==null?void 0:O._id,type:(z=r==null?void 0:r.document)==null?void 0:z._type,_searchParams:Object.entries(c)}})},e[0]=(j=r==null?void 0:r.document)==null?void 0:j._id,e[1]=(x=r==null?void 0:r.document)==null?void 0:x._type,e[2]=c,e[3]=m):m=e[3];const f=m;let g,y;e[4]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[5]!==d?(y=d.get(((A=r==null?void 0:r.document)==null?void 0:A._type)||"shoe"),e[4]=(R=r==null?void 0:r.document)==null?void 0:R._type,e[5]=d,e[6]=y):y=e[6],g=y;const b=g,v=ji(((k=r==null?void 0:r.document)==null?void 0:k._id)||"",b);let w;e:{if(!(r!=null&&r.document)){w=null;break e}const $=r.document;let O;e[7]!==v.draft||e[8]!==v.published||e[9]!==$?(O=ms({value:$,published:v.published,draft:v.draft}),e[7]=v.draft,e[8]=v.published,e[9]=$,e[10]=O):O=e[10];let z;e[11]!==p?(z=p("main-document.label"),e[11]=p,e[12]=z):z=e[12];let q;e[13]!==z?(q=u.jsx(le,{padding:1,radius:2,shadow:1,children:u.jsx(V,{muted:!0,size:0,weight:"medium",children:z})}),e[13]=z,e[14]=q):q=e[14];let U;e[15]!==b||e[16]!==O||e[17]!==q?(U=u.jsx(gs,{...O,schemaType:b,status:q}),e[15]=b,e[16]=O,e[17]=q,e[18]=U):U=e[18],w=U}const P=w;if(n&&s){let $;return e[19]!==n||e[20]!==s||e[21]!==a||e[22]!==i||e[23]!==c||e[24]!==l?($=u.jsx(_i,{documentId:n,documentType:s,onFocusPath:a,onStructureParams:i,searchParams:c,structureParams:l}),e[19]=n,e[20]=s,e[21]=a,e[22]=i,e[23]=c,e[24]=l,e[25]=$):$=e[25],$}let _;e[26]!==f||e[27]!==r||e[28]!==P||e[29]!==p?(_=r&&u.jsx(le,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(ys,{__unstable_focusRing:!0,as:f,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:P}):u.jsx(le,{padding:2,radius:2,tone:"inherit",children:u.jsxs(Q,{gap:3,children:[u.jsx(re,{flex:"none",children:u.jsx(V,{size:1,children:u.jsx(vs,{})})}),u.jsx(re,{flex:1,children:u.jsx(V,{size:1,children:u.jsx(bs,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[26]=f,e[27]=r,e[28]=P,e[29]=p,e[30]=_):_=e[30];let S;e[31]!==r||e[32]!==i||e[33]!==o||e[34]!==c?(S=u.jsx(bi,{mainDocumentState:r,onStructureParams:i,searchParams:c,refs:o}),e[31]=r,e[32]=i,e[33]=o,e[34]=c,e[35]=S):S=e[35];let T;return e[36]!==_||e[37]!==S?(T=u.jsxs(Q,{direction:"column",flex:1,height:"fill",children:[_,S]}),e[36]=_,e[37]=S,e[38]=T):T=e[38],T}function Ri(t){const e=D.c(2);let n;e[0]!==t?(n=()=>t||Qe(),e[0]=t,e[1]=n):n=e[1];const[s]=h.useState(n);return s}const Ti=ue.div`
  position: relative;
`,Ci=ue.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:t})=>t?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:t})=>!t&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,wr=function(t){const e=D.c(27),{id:n,order:s,disabled:r}=t,a=r===void 0?!1:r,i=h.useRef(null),o=h.useContext(en);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=Ri(n),{activeResizer:l,drag:p,startDragging:d,stopDragging:m,registerElement:f,unregisterElement:g}=o,y=l===c;if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");let b;e[0]!==c||e[1]!==d?(b=k=>{d(c,k.nativeEvent)},e[0]=c,e[1]=d,e[2]=b):b=e[2];const v=b;let w;e[3]!==p||e[4]!==c?(w=k=>{p(c,k)},e[3]=p,e[4]=c,e[5]=w):w=e[5];const P=w;let _;e[6]!==m?(_=()=>{i.current.blur(),m()},e[6]=m,e[7]=_):_=e[7];const S=_;let T,E;e[8]!==a||e[9]!==y||e[10]!==P||e[11]!==S?(T=()=>{if(!y||a)return;const k=function(){const $=document.body.style,O=document.documentElement.style,{cursor:z}=O,{userSelect:q}=$;return O.cursor="ew-resize",$.userSelect="none",()=>{z?O.cursor=z:O.removeProperty("cursor"),q?$.userSelect=q:$.removeProperty("user-select")}}();return window.addEventListener("mousemove",P),window.addEventListener("mouseup",S),window.addEventListener("contextmenu",S),()=>{k(),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",S),window.removeEventListener("contextmenu",S)}},E=[a,y,P,S],e[8]=a,e[9]=y,e[10]=P,e[11]=S,e[12]=T,e[13]=E):(T=e[12],E=e[13]),h.useEffect(T,E);let C,j;e[14]!==c||e[15]!==s||e[16]!==f||e[17]!==g?(C=()=>(f(c,{id:c,order:s,type:"resizer",el:i}),()=>{g(c)}),j=[c,s,f,g],e[14]=c,e[15]=s,e[16]=f,e[17]=g,e[18]=C,e[19]=j):(C=e[18],j=e[19]),h.useLayoutEffect(C,j);let x,I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=u.jsx("span",{}),x=u.jsx("span",{}),e[20]=x,e[21]=I):(x=e[20],I=e[21]);let A;e[22]!==a?(A=u.jsxs(Ci,{$disabled:a,children:[I,x]}),e[22]=a,e[23]=A):A=e[23];let R;return e[24]!==v||e[25]!==A?(R=u.jsx(Ti,{onMouseDown:v,ref:i,children:A}),e[24]=v,e[25]=A,e[26]=R):R=e[26],R},Ii=t=>{const e=D.c(8),{documentId:n,setDisplayedDocument:s,getCommentIntent:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(wr,{order:4}),e[0]=a):a=e[0];let i;e[1]!==r||e[2]!==t.children?(i=u.jsx(xs,{getIntent:r,children:t.children}),e[1]=r,e[2]=t.children,e[3]=i):i=e[3];let o;return e[4]!==n||e[5]!==s||e[6]!==i?(o=u.jsxs(u.Fragment,{children:[a,u.jsx(hn,{id:"content",minWidth:325,order:5,children:u.jsx(Ns,{documentId:n,setDisplayedDocument:s,children:i})})]}),e[4]=n,e[5]=s,e[6]=i,e[7]=o):o=e[7],o},$i=t=>{const e=D.c(14),{documentId:n,documentsOnPage:s,documentType:r,getCommentIntent:a,mainDocumentState:i,onFocusPath:o,onStructureParams:c,searchParams:l,setDisplayedDocument:p,structureParams:d}=t;let m;e[0]!==n||e[1]!==r||e[2]!==s||e[3]!==i||e[4]!==o||e[5]!==c||e[6]!==l||e[7]!==d?(m=u.jsx(Ei,{documentId:n,documentType:r,mainDocumentState:i,onFocusPath:o,onStructureParams:c,refs:s,searchParams:l,structureParams:d}),e[0]=n,e[1]=r,e[2]=s,e[3]=i,e[4]=o,e[5]=c,e[6]=l,e[7]=d,e[8]=m):m=e[8];let f;return e[9]!==n||e[10]!==a||e[11]!==p||e[12]!==m?(f=u.jsx(Ii,{documentId:n,getCommentIntent:a,setDisplayedDocument:p,children:m}),e[9]=n,e[10]=a,e[11]=p,e[12]=m,e[13]=f):f=e[13],f},ki=function(t){const e=D.c(5),{children:n,navigate:s}=t;let r;e[0]!==s?(r=(o,c)=>{s((c===void 0?void 0:c)||{},o?{preview:o}:{})},e[0]=s,e[1]=r):r=e[1];const a=r;let i;return e[2]!==n||e[3]!==a?(i=u.jsx(os.Provider,{value:a,children:n}),e[2]=n,e[3]=a,e[4]=i):i=e[4],i};function Ai(t,e){const n=D.c(9);let s;n[0]!==e||n[1]!==t?(s=()=>JSON.parse(localStorage.getItem(t)??JSON.stringify(e)),n[0]=e,n[1]=t,n[2]=s):s=n[2];const[r,a]=h.useState(s);let i,o;n[3]!==t||n[4]!==r?(i=()=>{localStorage.setItem(t,JSON.stringify(r))},o=[t,r],n[3]=t,n[4]=r,n[5]=i,n[6]=o):(i=n[5],o=n[6]),h.useEffect(i,o);let c;return n[7]!==r?(c=[r,a],n[7]=r,n[8]=c):c=n[8],c}function Mi(t){const e=D.c(11),{unstable_navigator:n}=t,s=!!(n!=null&&n.component),[r,a]=Ai("presentation/navigator",s),i=s?r:!1;let o;e:{if(!s){o=void 0;break e}let f;e[0]!==a?(f=()=>a(Oi),e[0]=a,e[1]=f):f=e[1],o=f}const c=o;let l;e[2]!==i||e[3]!==n?(l=function(){return u.jsx(u.Fragment,{children:i&&u.jsx(Di,{...n})})},e[2]=i,e[3]=n,e[4]=l):l=e[4];const p=l;let d;e[5]!==i||e[6]!==c?(d={navigatorEnabled:i,toggleNavigator:c},e[5]=i,e[6]=c,e[7]=d):d=e[7];let m;return e[8]!==p||e[9]!==d?(m=[d,p],e[8]=p,e[9]=d,e[10]=m):m=e[10],m}function Oi(t){return!t}function Li(t){const e=D.c(11),{minWidth:n,maxWidth:s,component:r}=t,a=n!=null&&s!=null&&n===s;let i;e[0]!==r?(i=u.jsx(r,{}),e[0]=r,e[1]=i):i=e[1];let o;e[2]!==s||e[3]!==n||e[4]!==i?(o=u.jsx(hn,{id:"navigator",minWidth:n,maxWidth:s,order:1,children:i}),e[2]=s,e[3]=n,e[4]=i,e[5]=o):o=e[5];let c;e[6]!==a?(c=u.jsx(wr,{order:2,disabled:a}),e[6]=a,e[7]=c):c=e[7];let l;return e[8]!==o||e[9]!==c?(l=u.jsxs(u.Fragment,{children:[o,c]}),e[8]=o,e[9]=c,e[10]=l):l=e[10],l}const Di=h.memo(Li),zi=function(t){const e=D.c(3),{children:n,params:s}=t;let r;r=s;const a=r;let i;return e[0]!==n||e[1]!==a?(i=u.jsx(cs.Provider,{value:a,children:n}),e[0]=n,e[1]=a,e[2]=i):i=e[2],i},Ni=function(t){const e=D.c(10),{children:n,devMode:s,name:r,navigate:a,params:i,searchParams:o,structureParams:c}=t;let l,p;e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==i||e[4]!==o||e[5]!==c?(p={devMode:s,name:r,navigate:a,params:i,searchParams:o,structureParams:c},e[0]=s,e[1]=r,e[2]=a,e[3]=i,e[4]=o,e[5]=c,e[6]=p):p=e[6],l=p;const d=l;let m;return e[7]!==n||e[8]!==d?(m=u.jsx(ls.Provider,{value:d,children:n}),e[7]=n,e[8]=d,e[9]=m):m=e[9],m},Wi=ot.create(ue.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Ui=ue(re)`
  position: absolute;
  inset: 0;
  background: transparent;
`,qi=h.forwardRef(function(t,e){const n=D.c(16),{animate:s,initial:r,onLoad:a,preventClick:i,src:o,variants:c,style:l}=t,p=`presentation-tool-iframe-${h.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;n[0]!==l||n[1]!==p?(d={...l,viewTransitionName:p},n[0]=l,n[1]=p,n[2]=d):d=n[2];let m;n[3]!==s||n[4]!==r||n[5]!==a||n[6]!==e||n[7]!==o||n[8]!==d||n[9]!==c?(m=u.jsx(Wi,{style:d,animate:s,initial:r,onLoad:a,ref:e,src:o,variants:c}),n[3]=s,n[4]=r,n[5]=a,n[6]=e,n[7]=o,n[8]=d,n[9]=c,n[10]=m):m=n[10];let f;n[11]!==i?(f=i&&u.jsx(Ui,{}),n[11]=i,n[12]=f):f=n[12];let g;return n[13]!==m||n[14]!==f?(g=u.jsxs(u.Fragment,{children:[m,f]}),n[13]=m,n[14]=f,n[15]=g):g=n[15],g});function Vi(t){const e=D.c(16),{openPopup:n,previewLocationOrigin:s,previewLocationRoute:r}=t,{t:a}=Pe(Se);let i;e[0]!==n?(i=y=>{y.preventDefault(),n(y.currentTarget.href)},e[0]=n,e[1]=i):i=e[1];const o=i;let c;e[2]!==a?(c=a("share-url.menu-item.open.text"),e[2]=a,e[3]=c):c=e[3];let l;e[4]!==c?(l=u.jsx(V,{size:1,children:c}),e[4]=c,e[5]=l):l=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==a?(d=a("share-url.menu-item.open.text"),e[7]=a,e[8]=d):d=e[8];const m=`${s}${r}`;let f;e[9]!==o||e[10]!==d||e[11]!==m?(f=u.jsx(we,{as:"a","aria-label":d,icon:Ms,mode:"bleed",href:m,rel:"opener",target:"_blank",tooltipProps:null,onClick:o}),e[9]=o,e[10]=d,e[11]=m,e[12]=f):f=e[12];let g;return e[13]!==l||e[14]!==f?(g=u.jsx(nt,{animate:!0,content:l,fallbackPlacements:p,placement:"bottom",portal:!0,children:f}),e[13]=l,e[14]=f,e[15]=g):g=e[15],g}const Fi=function(t){var q;const e=D.c(27),{fontSize:n,onChange:s,origin:r,padding:a,prefix:i,suffix:o,value:c}=t,l=n===void 0?1:n,p=a===void 0?3:a,{t:d}=Pe(Se),{basePath:m}=((q=Yn())==null?void 0:q.activeWorkspace)||{},f=m===void 0?"/":m,g=h.useRef(null),[y,b]=h.useState(void 0),[v,w]=h.useState(void 0);let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=U=>{b(U.currentTarget.value)},e[0]=P):P=e[0];const _=P;let S;e[1]!==f||e[2]!==s||e[3]!==r||e[4]!==y||e[5]!==d?(S=U=>{var G;if(U.key==="Enter"){if(y===void 0)return;const K=y.startsWith("/")||y===""?`${r}${y}`:y;if(!K.startsWith(`${r}/`)&&K!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(K.startsWith(`${f}/`)||K===f)){w(d("preview-location-input.error",{basePath:f,context:"same-base-path"}));return}const Z=K===r?`${r}/`:K;w(void 0),b(void 0),s(Z.slice(r.length)),(G=g.current)==null||G.blur()}U.key==="Escape"&&(w(void 0),b(void 0))},e[1]=f,e[2]=s,e[3]=r,e[4]=y,e[5]=d,e[6]=S):S=e[6];const T=S;let E;e[7]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{w(void 0),b(void 0)},e[7]=E):E=e[7];const C=E;let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{w(void 0),b(void 0)},e[8]=j):j=e[8];let x;e[9]!==r||e[10]!==c?(x=[r,c],e[9]=r,e[10]=c,e[11]=x):x=e[11],h.useEffect(j,x);let I,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A={icon:Os},e[12]=A):A=e[12],I=A;const R=v?I:void 0;let k;e[13]!==r||e[14]!==c?(k=()=>{w(void 0),b(r+c)},e[13]=r,e[14]=c,e[15]=k):k=e[15];let $;e[16]===Symbol.for("react.memo_cache_sentinel")?($={zIndex:1},e[16]=$):$=e[16];const O=y===void 0?`${r}${c}`:y;let z;return e[17]!==v||e[18]!==l||e[19]!==T||e[20]!==p||e[21]!==i||e[22]!==o||e[23]!==R||e[24]!==k||e[25]!==O?(z=u.jsx(u.Fragment,{children:u.jsx(Ls,{clearButton:R,customValidity:v,fontSize:l,onBlur:C,onClear:k,onChange:_,onKeyDownCapture:T,padding:p,prefix:i,style:$,radius:2,ref:g,space:p,suffix:o,value:O})}),e[17]=v,e[18]=l,e[19]=T,e[20]=p,e[21]=i,e[22]=o,e[23]=R,e[24]=k,e[25]=O,e[26]=z):z=e[26],z},Bi=h.lazy(()=>Te(()=>import("./QRCodeSVG-5PEUte3J.js"),__vite__mapDeps([0,1]))),Kt=24,Hi=16,Ki=224,Gi=ue(us)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${Kt}px;
  width: ${Kt}px;
`,Xi=ot.create(gt),Qi=ot.create(V),Ji=ot.create(Gi),Pr=h.memo(function(t){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:n,initialUrl:s,previewLocationRoute:r,perspective:a}=t,{t:i}=Pe(Se),{push:o}=Nn(),c=ct({apiVersion:_t}),l=Xt(),[p,d]=h.useState(!0),[m,f]=h.useState(!1),[g,y]=h.useState(!1),[b,v]=h.useState(null),w=m||g||p,P=h.useMemo(()=>b?ja(s,b,r,a):null,[s,a,r,b]),[_,S]=h.useState(null);if(_)throw _;const T=h.useCallback(()=>{o({closable:!0,status:"warning",title:i("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[o,i]),E=h.useCallback(async()=>{try{y(!0),await Ra(c,"@sanity/presentation",typeof window>"u"?"":location.href,l==null?void 0:l.id),v(null)}catch(x){S(x)}finally{y(!1)}},[c,l==null?void 0:l.id]),C=h.useCallback(async()=>{try{f(!0);const x=await Ea(c,"@sanity/presentation",typeof window>"u"?"":location.href,l==null?void 0:l.id);v(x.secret)}catch(x){S(x)}finally{f(!1)}},[c,l==null?void 0:l.id]),j=h.useCallback(()=>{try{if(!P)throw new Error("No URL to copy");navigator.clipboard.writeText(P.toString()),o({closable:!0,status:"success",title:i("share-url.clipboard.status",{context:"success"})})}catch(x){S(x)}},[o,i,P]);return h.useEffect(()=>{let x=new AbortController,I=[];async function A(k,$){const{result:O,syncTags:z}=await c.fetch(qs,{},{filterResponse:!1,lastLiveEventId:k,tag:"presentation.fetch-shared-access-secret"});Array.isArray(z)&&(I=z),$.aborted||v(O)}const R=c.live.events().subscribe({next:k=>{k.type==="message"&&(x.abort(),x=new AbortController,k.tags.some($=>I.includes($))&&A(k.id,x.signal))},error:S});return A(null,x.signal).finally(()=>d(!1)),()=>{R.unsubscribe(),x.abort()}},[c]),u.jsx(Wn,{button:u.jsx(we,{"aria-label":i("preview-frame.share-button.aria-label"),icon:zr,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(Un,{style:{maxWidth:248},padding:n?void 0:0,children:n?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(Nr,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(nt,{animate:!0,content:u.jsx(V,{size:1,children:i("share-preview-menu.toggle-button.tooltip",{context:P?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(qn,{checked:m||P!==null&&!g,readOnly:m||g,indeterminate:p,onChange:e?P?E:C:T})}),u.jsx(V,{size:1,weight:"medium",children:i("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(V,{muted:!0,size:1,children:i("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(re,{padding:3,paddingTop:2,children:u.jsxs(Re,{space:3,children:[u.jsx(le,{tone:w||!P?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Vn,{children:w?u.jsx(Xi,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):P?u.jsx(u.Fragment,{children:u.jsxs(h.Suspense,{fallback:u.jsx(gt,{}),children:[u.jsx(Bi,{title:i("share-preview-menu.qr-code.title",{url:P.toString()}),value:P.toString(),size:Ki,color:"var(--card-fg-color)",logoSize:Kt+Hi}),u.jsx(Ji,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Qi,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i("share-preview-menu.qr-code.placeholder")})})}),u.jsx(V,{muted:!0,size:1,children:i("share-preview-menu.qr-code.instructions")})]})}),u.jsx(Wr,{}),u.jsx(Bt,{disabled:!P||g,icon:Ur,onClick:j,text:i("share-preview-menu.copy-url.text")})]}):u.jsx(le,{padding:2,tone:"caution",radius:3,children:u.jsx(V,{style:{textWrap:"pretty"},children:i("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});Pr.displayName="Memo(SharePreviewMenu)";const zt={previewDrafts:"preview-frame.perspective.previewDrafts.title",published:"preview-frame.perspective.published.title"},In={previewDrafts:"caution",published:"positive"},Yi=t=>{const e=D.c(131),{canSharePreviewAccess:n,canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,dispatch:a,iframe:i,iframeRef:o,initialUrl:c,loadersConnection:l,navigatorEnabled:p,onPathChange:d,onRefresh:m,openPopup:f,overlaysConnection:g,perspective:y,previewUrl:b,setPerspective:v,setViewport:w,targetOrigin:P,toggleNavigator:_,toggleOverlay:S,viewport:T,visualEditing:E}=t,{overlaysEnabled:C}=E,{t:j}=Pe(Se);let x;e[0]!==w||e[1]!==T?(x=()=>w(T==="desktop"?"mobile":"desktop"),e[0]=w,e[1]=T,e[2]=x):x=e[2];const I=x;let A;A=P===location.origin?"":P;const R=A;let k;e[3]!==a||e[4]!==o.current||e[5]!==m||e[6]!==b||e[7]!==P?(k=()=>{m(()=>{o.current&&(a({type:Fn}),Object.assign(o.current,{src:`${P}${b||"/"}`}))})},e[3]=a,e[4]=o.current,e[5]=m,e[6]=b,e[7]=P,e[8]=k):k=e[8];const $=k;let O;const z=new URL(b||"/",P),{pathname:q,search:U}=_a(z);O=`${q}${U}`;const G=O;let K;e[9]===Symbol.for("react.memo_cache_sentinel")?(K={width:"100%"},e[9]=K):K=e[9];let Z;e[10]!==p||e[11]!==j||e[12]!==_?(Z=_&&u.jsx(we,{"aria-label":j("preview-frame.navigator.toggle-button.aria-label"),icon:Ps,mode:"bleed",onClick:_,selected:p,tooltipProps:{content:u.jsx(V,{size:1,children:j("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=p,e[11]=j,e[12]=_,e[13]=Z):Z=e[13];let se;e[14]===Symbol.for("react.memo_cache_sentinel")?(se={whiteSpace:"nowrap"},e[14]=se):se=e[14];const de=C?"disable":"enable";let L;e[15]!==j||e[16]!==de?(L=j("preview-frame.overlay.toggle-button.tooltip",{context:de}),e[15]=j,e[16]=de,e[17]=L):L=e[17];let ne;e[18]!==L?(ne=u.jsx(re,{padding:1,children:u.jsx(V,{size:1,children:L})}),e[18]=L,e[19]=ne):ne=e[19];let ae;e[20]===Symbol.for("react.memo_cache_sentinel")?(ae=u.jsx(re,{paddingY:1,children:u.jsx(_s,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=ae):ae=e[20];let oe;e[21]!==ne?(oe=u.jsxs(Q,{align:"center",style:se,children:[ne,ae]}),e[21]=ne,e[22]=oe):oe=e[22];let B;e[23]===Symbol.for("react.memo_cache_sentinel")?(B=["bottom-start"],e[23]=B):B=e[23];let H;e[24]===Symbol.for("react.memo_cache_sentinel")?(H={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=H):H=e[24];const F=C?"transparent":void 0;let X;e[25]===Symbol.for("react.memo_cache_sentinel")?(X={margin:-4},e[25]=X):X=e[25];const ce=i.status==="loading"||g!=="connected";let ee;e[26]!==C||e[27]!==ce||e[28]!==S?(ee=u.jsx("div",{style:X,children:u.jsx(qn,{checked:C,onChange:S,disabled:ce})}),e[26]=C,e[27]=ce,e[28]=S,e[29]=ee):ee=e[29];const Y=!C;let J;e[30]!==j?(J=j("preview-frame.overlay.toggle-button.text"),e[30]=j,e[31]=J):J=e[31];let ie;e[32]!==Y||e[33]!==J?(ie=u.jsx(re,{children:u.jsx(V,{muted:Y,size:1,weight:"medium",children:J})}),e[32]=Y,e[33]=J,e[34]=ie):ie=e[34];let pe;e[35]!==ee||e[36]!==ie?(pe=u.jsxs(Q,{align:"center",gap:3,children:[ee,ie]}),e[35]=ee,e[36]=ie,e[37]=pe):pe=e[37];let ve;e[38]!==F||e[39]!==pe?(ve=u.jsx(le,{as:"label",flex:"none",padding:3,marginX:1,style:H,tone:F,children:pe}),e[38]=F,e[39]=pe,e[40]=ve):ve=e[40];let fe;e[41]!==oe||e[42]!==ve?(fe=u.jsx(nt,{animate:!0,content:oe,fallbackPlacements:B,placement:"bottom",portal:!0,children:ve}),e[41]=oe,e[42]=ve,e[43]=fe):fe=e[43];let be;e[44]!==i.status||e[45]!==j?(be=i.status==="loaded"?j("preview-frame.refresh-button.tooltip"):j("preview-frame.status",{context:i.status}),e[44]=i.status,e[45]=j,e[46]=be):be=e[46];let he;e[47]!==be?(he=u.jsx(V,{size:1,children:be}),e[47]=be,e[48]=he):he=e[48];let xe;e[49]===Symbol.for("react.memo_cache_sentinel")?(xe=["bottom-end"],e[49]=xe):xe=e[49];let me;e[50]!==j?(me=j("preview-frame.refresh-button.aria-label"),e[50]=j,e[51]=me):me=e[51];const Je=i.status==="reloading"||i.status==="refreshing";let _e;e[52]!==$||e[53]!==me||e[54]!==Je?(_e=u.jsx(we,{"aria-label":me,icon:js,mode:"bleed",loading:Je,onClick:$,tooltipProps:null}),e[52]=$,e[53]=me,e[54]=Je,e[55]=_e):_e=e[55];let Ce;e[56]!==he||e[57]!==_e?(Ce=u.jsx(re,{padding:1,children:u.jsx(nt,{animate:!0,content:he,fallbackPlacements:xe,placement:"bottom",portal:!0,children:_e})}),e[56]=he,e[57]=_e,e[58]=Ce):Ce=e[58];let Ie;e[59]!==f||e[60]!==R||e[61]!==G?(Ie=u.jsx(re,{padding:1,children:u.jsx(Vi,{openPopup:f,previewLocationOrigin:R,previewLocationRoute:G})}),e[59]=f,e[60]=R,e[61]=G,e[62]=Ie):Ie=e[62];let $e;e[63]!==d||e[64]!==R||e[65]!==G||e[66]!==Ce||e[67]!==Ie?($e=u.jsx(re,{flex:1,children:u.jsx(Fi,{prefix:Ce,onChange:d,origin:R,suffix:Ie,value:G})}),e[63]=d,e[64]=R,e[65]=G,e[66]=Ce,e[67]=Ie,e[68]=$e):$e=e[68];const De=zt[l==="connected"?y:"previewDrafts"];let je;e[69]!==j||e[70]!==De?(je=j(De),e[69]=j,e[70]=De,e[71]=je):je=e[71];const ze=l==="reconnecting"&&i.status!=="loaded",Ne=l!=="connected";let Ee;e[72]!==je||e[73]!==ze||e[74]!==Ne?(Ee=u.jsx(we,{iconRight:Es,mode:"bleed",text:je,loading:ze,disabled:Ne}),e[72]=je,e[73]=ze,e[74]=Ne,e[75]=Ee):Ee=e[75];let M;e[76]===Symbol.for("react.memo_cache_sentinel")?(M={maxWidth:240},e[76]=M):M=e[76];let W;e[77]!==v?(W=()=>v("previewDrafts"),e[77]=v,e[78]=W):W=e[78];const N=y==="previewDrafts";let ke;e[79]!==y||e[80]!==j?(ke=()=>u.jsxs(Q,{align:"flex-start",gap:3,children:[u.jsx(re,{flex:"none",children:u.jsx(V,{size:1,children:u.jsx(Rs,{})})}),u.jsxs(Re,{flex:1,space:2,children:[u.jsx(V,{size:1,weight:"medium",children:j(zt.previewDrafts)}),u.jsx(V,{muted:!0,size:1,children:j("preview-frame.perspective.previewDrafts.text")})]}),u.jsx(re,{flex:"none",children:u.jsx(V,{muted:!0,size:1,style:{opacity:y==="previewDrafts"?1:0},children:u.jsx(bn,{})})})]}),e[79]=y,e[80]=j,e[81]=ke):ke=e[81];let ge;e[82]!==W||e[83]!==N||e[84]!==ke?(ge=u.jsx(Bt,{onClick:W,pressed:N,tone:In.previewDrafts,renderMenuItem:ke}),e[82]=W,e[83]=N,e[84]=ke,e[85]=ge):ge=e[85];let Ae;e[86]!==v?(Ae=()=>v("published"),e[86]=v,e[87]=Ae):Ae=e[87];const Ye=y==="published";let ye;e[88]!==y||e[89]!==j?(ye=()=>u.jsxs(Q,{align:"flex-start",gap:3,children:[u.jsx(re,{flex:"none",children:u.jsx(V,{size:1,children:u.jsx(Ts,{})})}),u.jsxs(Re,{flex:1,space:2,children:[u.jsx(V,{size:1,weight:"medium",children:j(zt.published)}),u.jsx(V,{muted:!0,size:1,children:j("preview-frame.perspective.published.text")})]}),u.jsx(re,{flex:"none",children:u.jsx(V,{muted:!0,size:1,style:{opacity:y==="published"?1:0},children:u.jsx(bn,{})})})]}),e[88]=y,e[89]=j,e[90]=ye):ye=e[90];let We;e[91]!==Ae||e[92]!==Ye||e[93]!==ye?(We=u.jsx(Bt,{onClick:Ae,pressed:Ye,tone:In.published,renderMenuItem:ye}),e[91]=Ae,e[92]=Ye,e[93]=ye,e[94]=We):We=e[94];let Ue;e[95]!==ge||e[96]!==We?(Ue=u.jsxs(Un,{style:M,children:[ge,We]}),e[95]=ge,e[96]=We,e[97]=Ue):Ue=e[97];let lt;e[98]===Symbol.for("react.memo_cache_sentinel")?(lt={constrainSize:!0,placement:"bottom",portal:!0},e[98]=lt):lt=e[98];let qe;e[99]!==Ee||e[100]!==Ue?(qe=u.jsx(Q,{align:"center",flex:"none",gap:1,children:u.jsx(Wn,{button:Ee,id:"perspective-menu",menu:Ue,popover:lt})}),e[99]=Ee,e[100]=Ue,e[101]=qe):qe=e[101];const Ct=T==="desktop"?"narrow":"full";let Ve;e[102]!==j||e[103]!==Ct?(Ve=j("preview-frame.viewport-button.tooltip",{context:Ct}),e[102]=j,e[103]=Ct,e[104]=Ve):Ve=e[104];let Fe;e[105]!==Ve?(Fe=u.jsx(V,{size:1,children:Ve}),e[105]=Ve,e[106]=Fe):Fe=e[106];let ut;e[107]===Symbol.for("react.memo_cache_sentinel")?(ut=["bottom-start"],e[107]=ut):ut=e[107];let Be;e[108]!==j?(Be=j("preview-frame.viewport-button.aria-label"),e[108]=j,e[109]=Be):Be=e[109];const It=T==="desktop"?Cs:Is;let He;e[110]!==Be||e[111]!==It||e[112]!==I?(He=u.jsx(we,{"aria-label":Be,icon:It,mode:"bleed",onClick:I,tooltipProps:null}),e[110]=Be,e[111]=It,e[112]=I,e[113]=He):He=e[113];let Ke;e[114]!==Fe||e[115]!==He?(Ke=u.jsx(Q,{align:"center",flex:"none",gap:1,children:u.jsx(nt,{animate:!0,content:Fe,fallbackPlacements:ut,placement:"bottom",portal:!0,children:He})}),e[114]=Fe,e[115]=He,e[116]=Ke):Ke=e[116];let Ge;e[117]!==n||e[118]!==s||e[119]!==r||e[120]!==c||e[121]!==y||e[122]!==G?(Ge=n&&u.jsx(Q,{align:"center",flex:"none",gap:1,children:u.jsx(Pr,{canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,previewLocationRoute:G,initialUrl:c,perspective:y})}),e[117]=n,e[118]=s,e[119]=r,e[120]=c,e[121]=y,e[122]=G,e[123]=Ge):Ge=e[123];let dt;return e[124]!==fe||e[125]!==$e||e[126]!==qe||e[127]!==Ke||e[128]!==Ge||e[129]!==Z?(dt=u.jsxs(Q,{align:"center",gap:1,paddingX:1,style:K,children:[Z,fe,$e,qe,Ke,Ge]}),e[124]=fe,e[125]=$e,e[126]=qe,e[127]=Ke,e[128]=Ge,e[129]=Z,e[130]=dt):dt=e[130],dt};function Zi(t){var l;const e=D.c(7),n=eo,s=(l=t.options)==null?void 0:l.component;let r;e[0]!==s||e[1]!==t?(r=s?u.jsx(s,{...t,renderDefault:n}):n(t),e[0]=s,e[1]=t,e[2]=r):r=e[2];const a=r;let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={position:"relative"},e[3]=i):i=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={minHeight:0},e[4]=o):o=e[4];let c;return e[5]!==a?(c=u.jsx(le,{flex:"none",padding:2,borderBottom:!0,style:i,children:u.jsx(Q,{align:"center",style:o,children:a})}),e[5]=a,e[6]=c):c=e[6],c}function eo(t){return u.jsx(Yi,{...t})}function to(t){const e=D.c(2);let n;return e[0]!==t?(n=()=>u.jsx(Zi,{...t}),e[0]=t,e[1]=n):n=e[1],n}const Nt=ot.create(Q),Sr=h.memo(h.forwardRef(function(t,e){const{dispatch:n,iframe:s,header:r,initialUrl:a,loadersConnection:i,overlaysConnection:o,perspective:c,viewport:l,vercelProtectionBypass:p}=t,[d,m]=h.useState(null),f=d===null?c:d,g=h.useMemo(()=>{const L=new URL(a);return L.searchParams.get(st)||L.searchParams.set(st,f),(p||L.searchParams.get(rt))&&L.searchParams.set(sn,"samesitenone"),p&&!L.searchParams.get(rt)&&L.searchParams.set(rt,p),L},[a,f,p]);h.useEffect(()=>{i==="connected"&&m(L=>L===null?c:L)},[i,c]);const{t:y}=Pe(Se),{devMode:b}=Qt(),v=qr(),w=h.useRef(null),P=to({...t,iframeRef:w,options:r});h.useImperativeHandle(e,()=>w.current);const _=s.status==="loading"||s.status==="reloading",[S,T]=h.useState(!1),E=s.status==="refreshing",[C,j]=h.useState(!1),x=_||E||o==="connecting",I=h.useCallback(()=>{w.current&&(w.current.src=g.toString(),n({type:Fn}))},[n,g]),A=h.useCallback(()=>{k(!0)},[]),[R,k]=h.useState(!1),[$,O]=h.useState(!1);h.useEffect(()=>{if(!(_||E)&&(o==="connecting"||o==="reconnecting")){const L=setTimeout(()=>{O(!0)},5e3);return()=>clearTimeout(L)}},[o,_,E]),h.useEffect(()=>{if(!(_||E||!$)){if(o==="connected"&&(j(!1),O(!1),T(!1),k(!1)),o==="connecting"){const L=setTimeout(()=>{T(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},yn);return()=>clearTimeout(L)}if(o==="reconnecting"){const L=setTimeout(()=>{T(!0),j(!0)},yn);return()=>clearTimeout(L)}}},[_,o,E,$]);const z=h.useCallback(()=>{n({type:Bn})},[n]);h.useEffect(()=>{if(!w.current)return;const L=w.current;function ne(){L===document.activeElement&&L.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",ne),()=>{window.removeEventListener("blur",ne)}},[]);const q=h.useMemo(()=>(_||o==="connecting"&&s.status!=="refreshing")&&!R,[R,s.status,_,o]),U=h.useSyncExternalStore(h.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),G=h.useMemo(()=>[q?"background":"active",_?"reloading":"idle",U?"":l,$&&!R?"timedOut":""],[U,R,_,q,$,l]),[K,Z]=h.useState(l),[se,de]=h.useState(Wt[l]);return h.useEffect(()=>{if(U&&l!==K){const L=()=>{Z(l),de(Wt[l])};!v&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>Vr.flushSync(()=>L())):L()}},[U,v,K,l]),u.jsx(Us,{transition:v?{duration:0}:void 0,children:u.jsxs(Fr,{children:[u.jsx(P,{}),u.jsx(le,{flex:1,tone:"transparent",children:u.jsxs(Q,{align:"center",height:"fill",justify:"center",padding:(U?K:l)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:x?"wait":void 0},children:[u.jsx(Vn,{children:!C&&!_&&!E&&$&&!R?u.jsx(Nt,{initial:"initial",animate:"animate",exit:"exit",variants:$n,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(Q,{style:{...Pt[l]},justify:"center",align:"center",direction:"column",gap:4,children:[S&&u.jsx(we,{disabled:!0,mode:"ghost",text:y("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(le,{radius:2,tone:S?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(Q,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(gt,{muted:!0}),u.jsx(V,{muted:!0,size:1,children:S?y("preview-frame.status",{context:"timeout"}):y("preview-frame.status",{context:"connecting"})})]})}),S&&u.jsx(we,{tone:"critical",onClick:A,text:y("preview-frame.continue-button.text")})]})}):(_||o==="connecting"&&s.status!=="refreshing")&&!R?u.jsx(Nt,{initial:"initial",animate:"animate",exit:"exit",variants:$n,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(Q,{style:{...Pt[l]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(gt,{muted:!0}),u.jsx(V,{muted:!0,size:1,children:y("preview-frame.status",{context:"loading"})})]})}):C&&!R?u.jsx(Nt,{initial:"initial",animate:"animate",exit:"exit",variants:no,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(mn,{flex:1,message:y("preview-frame.connection.error.text"),onRetry:I,onContinueAnyway:A,children:b&&u.jsxs(u.Fragment,{children:[o!=="connected"&&u.jsx(le,{padding:3,radius:2,tone:"critical",children:u.jsxs(Re,{space:3,children:[u.jsx(yt,{muted:!0,size:0,children:y("preview-frame.overlay.connection-status.label")}),u.jsx(vt,{size:1,children:y("channel.status",{context:o})})]})}),i!=="connected"&&u.jsx(le,{padding:3,radius:2,tone:"critical",children:u.jsxs(Re,{space:3,children:[u.jsx(yt,{muted:!0,size:0,children:y("preview-frame.loader.connection-status.label")}),u.jsx(vt,{size:1,children:y("channel.status",{context:i})})]})})]})})}):null}),u.jsx(qi,{animate:G,initial:["background"],onLoad:z,preventClick:q,ref:w,src:g.toString(),style:se,variants:Wt})]})})]})})}));Sr.displayName="Memo(ForwardRef(Preview))";const Pt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},$n={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},no={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Wt={desktop:{...Pt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...Pt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function ro(t,e,n,s){const r=D.c(5),a=h.useRef(n),i=Zt(e);let o,c;r[0]!==i||r[1]!==s||r[2]!==t?(o=()=>{const l=a.current;if(a.current=t,t!==l)return i(t,l)},c=[i,s,t],r[0]=i,r[1]=s,r[2]=t,r[3]=o,r[4]=c):(o=r[3],c=r[4]),h.useEffect(o,c)}const so=function(t){const e=D.c(4),{documentId:n,documentType:s,navigate:r,perspective:a,documentRevision:i}=t,o=ds(n,s);let c;return e[0]!==i||e[1]!==o||e[2]!==r?(c=l=>{let p;if(l==="published"&&o.published){const{_updatedAt:d,_rev:m}=o.published;p=`${d}/${m}`}i!==p&&r({},{rev:p},!0)},e[0]=i,e[1]=o,e[2]=r,e[3]=c):c=e[3],ro(a,c),null};function ao(){let t=!1;return(...e)=>{t||(console.warn(...e),t=!0)}}const io=ao();function oo(t,e){if(t!=="published"&&t!=="previewDrafts")throw new Error(`Invalid perspective: ${t}`);const[n,s]=h.useState({}),[r,a]=h.useState({}),i=h.useRef(""),o=h.useCallback((c,l,p=[])=>{const d=p.filter(m=>"_projectId"in m&&m._projectId?(io("Cross dataset references are not supported yet, ignoring source document",m),!1):m);(l==="published"?s:a)(m=>{const f={};for(const y of d)f[y._id]=y;if(i.current!==e.current.url)return i.current=e.current.url,{[c]:f};const g=m[c];return zs(g,f)?m:{...m,[c]:f}})},[e]);return[h.useMemo(()=>{const c=Object.values(t==="published"?n:r).reduce((l,p)=>(Object.values(p).forEach(d=>{l[d._id]=d}),l),{});return Object.values(c)},[t,r,n]),o]}function _r(t,e){return t instanceof Function?t(e):t}function co(t,e){var n;if(t.resolve){const s=(n=t.resolve(e))==null?void 0:n.filter;return s?`// groq
*[${s}][0]{_id, _type}`:void 0}return"type"in t?`// groq
*[_type == "${t.type}"][0]{_id, _type}`:`// groq
*[${_r(t.filter,e)}][0]{_id, _type}`}function lo(t,e){var n;return t.resolve?((n=t.resolve(e))==null?void 0:n.params)??e.params:"type"in t?{}:_r(t.params,e)??e.params}function uo(t,e){const n=Array.isArray(t)?t:[t];for(t of n){let s,r=t;if(typeof t=="string")try{const a=new URL(t);s=a.origin,r=a.pathname}catch{}if(!(s&&e.origin!==s))try{const a=Ia(r,{decode:decodeURIComponent})(e.pathname);if(a){const{params:i,path:o}=a;return{origin:s,params:i,path:o}}}catch{throw new Error(`"${t}" is not a valid route pattern`)}}}function po(t){var S,T;const e=D.c(16),{navigate:n,navigationHistory:s,path:r,previewUrl:a,resolvers:i}=t;let o;e[0]!==i?(o=i===void 0?[]:i,e[0]=i,e[1]=o):o=e[1];const c=o,{state:l}=Yt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:_t},e[2]=p):p=e[2];const d=ct(p);let m;e[3]!==r||e[4]!==l?(m=r||((T=(S=l._searchParams)==null?void 0:S.find(fo))==null?void 0:T[1])||"",e[3]=r,e[4]=l,e[5]=m):m=e[5];const f=m,[g,y]=h.useState(void 0),b=h.useRef(void 0);let v;e[6]!==n||e[7]!==s?(v=(E,C)=>{var j,x;(!E||b.current!==E._id)&&(y({document:E,path:C.pathname}),b.current=E==null?void 0:E._id,((j=s.at(-1))==null?void 0:j.id)===((x=s.at(-2))==null?void 0:x.id)&&(n==null||n({id:E==null?void 0:E._id,type:E==null?void 0:E._type})))},e[6]=n,e[7]=s,e[8]=v):v=e[8];const w=Zt(v);let P,_;return e[9]!==d||e[10]!==w||e[11]!==a||e[12]!==f||e[13]!==c?(P=()=>{const E=typeof a=="string"?a:typeof a=="object"&&(a==null?void 0:a.origin)||location.origin,C=new URL(f,E);if(c.length){let j;for(const x of c){const I=uo(x.route,C);if(I){j={context:I,resolver:x};break}}if(j){const x=co(j.resolver,j.context),I=lo(j.resolver,j.context);if(x){const A=new AbortController,R={perspective:"previewDrafts",signal:A.signal};return d.fetch(x,I,R).then(k=>w(k,C)).catch(k=>{k instanceof Error&&k.name==="AbortError"||(y({document:void 0,path:C.pathname}),b.current=void 0)}),()=>{A.abort()}}}}y(void 0),b.current=void 0},_=[d,w,a,f,c],e[9]=d,e[10]=w,e[11]=a,e[12]=f,e[13]=c,e[14]=P,e[15]=_):(P=e[14],_=e[15]),h.useEffect(P,_),g}function fo(t){const[e]=t;return e==="preview"}const mt=Hn(jt(),Gn(1)),tt=Jt(mt);Kn({baseUrl:mt,dataset:tt,id:mt,path:mt,projectId:tt,tool:tt,type:tt,workspace:tt,isDraft:Jt(jt())});const ho=/^([\w-]+):(0|[1-9][0-9]*)$/,mo=/^([\w-]+):([0-9]+),([0-9]+)$/,go=/^([\w-]+):([\w-]+)$/;function yo(t){const e=[];for(const n of t.split(".")){const s=ho.exec(n);if(s){e.push(s[1],Number(s[2]));continue}const r=mo.exec(n);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const a=go.exec(n);if(a){e.push(a[1],{_key:a[2]});continue}e.push(n)}return e}const kn=Hn(jt(),Gn(1));Kn({origin:kn,href:kn,data:Jt(Hr(jt(),ps()))});function vo(t){var n;if(t===void 0)return;const e=(n=decodeURIComponent(t))==null?void 0:n.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function bo(t){if(t!==void 0)return ar.toString(yo(decodeURIComponent(t)))}function xo(t){return{id:vo(t.id),path:bo(t.path),type:t.type}}function ht(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function wo({initialPreviewUrl:t,routerNavigate:e,routerState:n,routerSearchParams:s,frameStateRef:r}){const a=h.useMemo(()=>{const{id:d,path:m,type:f}=xo(n);return{id:d,type:f,path:m,preview:s.preview||`${t.pathname}${t.search}`,perspective:s.perspective,viewport:s.viewport,inspect:s.inspect,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}},[n,s,t]),i=h.useMemo(()=>ht({inspect:a.inspect,path:a.path,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}),[a.changesInspectorTab,a.comment,a.inspect,a.instruction,a.path,a.pathKey,a.rev,a.since,a.template,a.templateParams,a.view]),o=h.useMemo(()=>ht({perspective:a.perspective,preview:a.preview,viewport:a.viewport}),[a.perspective,a.preview,a.viewport]),c=h.useRef(n);h.useEffect(()=>{c.current=n},[n]);const[l,p]=h.useState([n]);return{navigate:h.useCallback((d,m={},f)=>{d.id&&(d.id=Et(d.id));const{_searchParams:g,...y}=c.current,b=(g||[]).reduce((_,[S,T])=>(_[S]=T,_),{}),v=ht({...y,...d}),w=ht({...b,...m});y.id!==v.id&&(delete w.template,delete w.templateParams),v._searchParams=Object.entries(w).reduce((_,[S,T])=>[..._,[S,T]],[]);const P=f??w.preview===r.current.url;p(_=>[..._,v]),e(v,{replace:P})},[e,r]),navigationHistory:l,params:a,searchParams:o,structureParams:i}}const Po=t=>{const e=D.c(10),[n,s]=h.useState(So);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d=>{const m=window.open(d,"_blank");m&&s(f=>new Set(f).add(m))},e[0]=r):r=e[0];const a=r;let i,o;e[1]!==t||e[2]!==n?(i=()=>{const d=[];if(n.size&&t)for(const m of n)m&&"closed"in m&&!m.closed&&d.push(t.addTarget(m));return()=>{d.forEach(_o)}},o=[t,n],e[1]=t,e[2]=n,e[3]=i,e[4]=o):(i=e[3],o=e[4]),h.useEffect(i,o);let c,l;e[5]!==n?(c=()=>{if(n.size){const d=setInterval(()=>{const m=new Set;for(const f of n)f&&"closed"in f&&f.closed&&m.add(f);m.size&&s(f=>{const g=new Set(f);for(const y of m)g.delete(y);return g})},fs);return()=>{clearInterval(d)}}},l=[n],e[5]=n,e[6]=c,e[7]=l):(c=e[6],l=e[7]),h.useEffect(c,l);let p;return e[8]!==n?(p={popups:n,open:a},e[8]=n,e[9]=p):p=e[9],p};function So(){return new Set}function _o(t){return t()}function jo(t,e,n,s,r){var d,m;const a=ct({apiVersion:_t}),i=Yn(),o=((d=i==null?void 0:i.activeWorkspace)==null?void 0:d.basePath)||"/",c=((m=i==null?void 0:i.activeWorkspace)==null?void 0:m.name)||"default",l=Ro(e,o,c,s),p=To(r&&typeof t=="object"||typeof t=="function",l);return mr(async()=>{if(typeof t=="string"){const g=new URL(t,location.origin);let y=g;try{if(s){const b=new URL(s,g);b.origin===g.origin&&(y=b)}}catch{}return location.origin===y.origin&&(y.pathname.startsWith(`${o}/`)||y.pathname===o)?g:y}const f=await(typeof t=="object"?Da(t):t)({client:a,previewUrlSecret:p,studioPreviewPerspective:n,previewSearchParam:s,studioBasePath:o});return new URL(f,location.origin)},[...l,p])}const Eo=Symbol("sanity/presentation/resolveUUID");function Ro(t,e,n,s){const r=D.c(12);let a;r[0]!==s?(a=()=>s||"",r[0]=s,r[1]=a):a=r[1];const[i,o]=h.useState(a),c=h.useRef(0);let l,p;r[2]!==i||r[3]!==s?(l=()=>{if(i&&s)return window.clearTimeout(c.current),()=>{c.current=window.setTimeout(()=>{o("")},100)}},p=[i,s],r[2]=i,r[3]=s,r[4]=l,r[5]=p):(l=r[4],p=r[5]),h.useEffect(l,p);const d=Xt();let m;const f=d==null?void 0:d.id;let g;return r[6]!==e||r[7]!==i||r[8]!==f||r[9]!==t||r[10]!==n?(g=["sanity/presentation",e,n,t,f,Eo,i],r[6]=e,r[7]=i,r[8]=f,r[9]=t,r[10]=n,r[11]=g):g=r[11],m=g,m}function To(t,e){const n=D.c(10);let s;n[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:_t},n[0]=s):s=n[0];const r=ct(s),a=Xt(),[i,o]=h.useState("");let c;n[1]!==r||n[2]!==(a==null?void 0:a.id)||n[3]!==e||n[4]!==t||n[5]!==i?(c=t?mr(async()=>await La(r,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id),[...e,i]):null,n[1]=r,n[2]=a==null?void 0:a.id,n[3]=e,n[4]=t,n[5]=i,n[6]=c):c=n[6];const l=c;let p,d;return n[7]!==l?(p=()=>{if(!l)return;const m=setTimeout(()=>{h.startTransition(()=>o(l.expiresAt.toString()))},l.expiresAt.getTime()-Date.now());return()=>clearTimeout(m)},d=[l],n[7]=l,n[8]=p,n[9]=d):(p=n[8],d=n[9]),h.useEffect(p,d),(l==null?void 0:l.secret)||null}function Ut(){const t=D.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,t[0]=e):e=t[0];const[n,s]=h.useState(e);let r;e:{const l=Array.from(n.values());if(l.find($o)){r="connected";break e}const p=l.filter(Io);if(p.length){r=p.some(Co)?"connecting":"reconnecting";break e}r="idle"}const a=r;let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=l=>{s(p=>{var m;const d=new Map(p);if(l.status==="disconnected")d.delete(l.connection);else{const f=((m=d.get(l.connection))==null?void 0:m.hasConnected)||l.status==="connected",g=l.status==="handshaking"?"connecting":l.status;d.set(l.connection,{status:g,hasConnected:f})}return d})},t[1]=i):i=t[1];const o=i;let c;return t[2]!==a?(c=[a,o],t[2]=a,t[3]=c):c=t[3],c}function Co(t){const{hasConnected:e}=t;return!e}function Io(t){const{status:e}=t;return e==="connecting"}function $o(t){const{status:e}=t;return e==="connected"}const ko=h.lazy(()=>Te(()=>import("./LoaderQueries-DktD-yQm.js"),__vite__mapDeps([2,1,3,4]))),Ao=h.lazy(()=>Te(()=>import("./LiveQueries-CKxFMnPM.js"),__vite__mapDeps([5,1,3,4]))),Mo=h.lazy(()=>Te(()=>import("./PostMessageDocuments-B5T0eFtX.js"),__vite__mapDeps([6,1]))),Oo=h.lazy(()=>Te(()=>import("./PostMessageRefreshMutations-M9-VPDN7.js"),__vite__mapDeps([7,1]))),Lo=h.lazy(()=>Te(()=>import("./PostMessagePerspective-DqkFxEl1.js"),__vite__mapDeps([8,1]))),Do=h.lazy(()=>Te(()=>import("./PostMessagePreviewSnapshots-5KFkhpvn.js"),__vite__mapDeps([9,1]))),zo=h.lazy(()=>Te(()=>import("./PostMessageSchema-BzqZ1MZ_.js"),__vite__mapDeps([10,1]))),No=h.lazy(()=>Te(()=>import("./PostMessageTelemetry-BOQrJrw8.js"),__vite__mapDeps([11,1]))),Wo=ue(Q)`
  overflow-x: auto;
`;function Uo(t){var De,je,ze,Ne,Ee;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,tool:r,vercelProtectionBypass:a}=t,i=(De=r.options)==null?void 0:De.components,o=(je=r.options)==null?void 0:je.previewUrl,c=r.name||Kr,{unstable_navigator:l,unstable_header:p}=i||{},{navigate:d,state:m}=Yt(),f=Xn(Object.fromEntries(m._searchParams||[])),g=jo(o||"/",c,f.perspective==="published"?"published":"previewDrafts",f.preview||null,e),y=h.useMemo(()=>o&&typeof o=="object"&&"draftMode"in o&&o.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),o.draftMode.shareAccess!==!1):o&&typeof o=="object"&&"previewMode"in o&&o.previewMode?o.previewMode.shareAccess!==!1:!1,[o]),[b]=h.useState(()=>{var W;const M=(W=r.options)==null?void 0:W.devMode;return typeof M=="function"?M():typeof M=="boolean"?M:typeof window<"u"&&window.location.hostname==="localhost"}),v=h.useMemo(()=>g.origin,[g.origin]),w=h.useRef(null),[P,_]=h.useState(),[S,T]=h.useState(null),E=h.useRef({title:void 0,url:void 0}),{navigate:C,navigationHistory:j,params:x,searchParams:I,structureParams:A}=wo({initialPreviewUrl:g,routerNavigate:d,routerState:m,routerSearchParams:f,frameStateRef:E}),R=h.useMemo(()=>gr(C,50),[C]),[k,$]=h.useReducer(Gr,{},Xr),O=h.useMemo(()=>x.perspective?"published":"previewDrafts",[x.perspective]),z=h.useMemo(()=>x.viewport?"mobile":"desktop",[x.viewport]),[q,U]=oo(O,E),G=Qr(),K=Jr(),Z=po({navigate:C,navigationHistory:j,path:x.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Ee=(Ne=r.options)==null?void 0:Ne.resolve)==null?void 0:Ee.mainDocuments}),[se,de]=Ut(),[L,ne]=Ut(),[ae,oe]=Ut(),{open:B}=Po(P),H=k.iframe.status==="loading";h.useEffect(()=>{var N;const M=(N=w.current)==null?void 0:N.contentWindow;if(!M||H)return;const W=va({targetOrigin:v});return W.addTarget(M),_(W),()=>{W.destroy(),_(void 0)}},[v,H]);const F=Zt((M,W,N)=>R(M,W,N));h.useEffect(()=>{if(!P)return;const M=P.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},wt().provide({actors:jn()}));M.on("visual-editing/focus",N=>{"id"in N&&F({type:N.type,id:N.id,path:N.path})}),M.on("visual-editing/navigate",N=>{const{title:ke,url:ge}=N;if(E.current.url!==ge)try{const[Ae,Ye]=ge.split("?"),ye=new URLSearchParams(Ye);ye.delete(rt),ye.delete(sn),F({},{preview:`${Ae}${ye.size>0?"?":""}${ye}`})}catch{F({},{preview:ge})}E.current={title:ke,url:ge}}),M.on("visual-editing/meta",N=>{E.current.title=N.title}),M.on("visual-editing/toggle",N=>{$({type:Yr,enabled:N.enabled})}),M.on("visual-editing/documents",N=>{U("visual-editing",N.perspective,N.documents)}),M.on("visual-editing/refreshing",N=>{N.source==="manual"?clearTimeout(me.current):N.source==="mutation"&&$({type:vn})}),M.on("visual-editing/refreshed",()=>{$({type:Bn})}),M.onStatus(de);const W=M.start();return T(M),()=>{W(),T(null)}},[P,F,U,de,v]),h.useEffect(()=>{if(!P)return;const M=P.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},wt().provide({actors:jn()}));return M.onStatus(oe),M.on("preview-kit/documents",W=>{W.projectId===G&&W.dataset===K&&U("preview-kit",W.perspective,W.documents)}),M.start()},[P,K,G,U,oe,v]);const X=h.useCallback(M=>{R({path:ar.toString(M)},{},!0)},[R]),ce=h.useCallback(M=>{const W=new URL(M,g.origin),N=W.pathname+W.search;W.origin===g.origin&&N!==x.preview&&R({},{preview:N})},[g,x,R]),ee=h.useCallback(M=>{R({},M)},[R]);h.useEffect(()=>{x.id&&x.path?S==null||S.post("presentation/focus",{id:x.id,path:x.path}):S==null||S.post("presentation/blur")},[x.id,x.path,S]),h.useEffect(()=>{E.current.url&&x.preview&&E.current.url!==x.preview&&(E.current.url=x.preview,se!=="connected"&&w.current?w.current.src=`${v}${x.preview}`:S==null||S.post("presentation/navigate",{url:x.preview,type:"replace"}))},[se,v,x.preview,S]);const Y=h.useCallback(()=>S==null?void 0:S.post("presentation/toggle-overlay"),[S]),[J,ie]=h.useState(null);h.useEffect(()=>{const M=N=>{An(N)&&Y()},W=N=>{An(N)&&Y(),Vo(["mod","\\"],N)&&Y()};return window.addEventListener("keydown",W),window.addEventListener("keyup",M),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",M)}},[Y]);const[pe,ve]=h.useState(null),[{navigatorEnabled:fe,toggleNavigator:be},he]=Mi({unstable_navigator:l}),xe=h.useRef(x.id);h.useEffect(()=>{x.rev&&xe.current&&x.id!==xe.current&&R({},{rev:void 0}),xe.current=x.id});const me=h.useRef(void 0),Je=h.useCallback(M=>{if($({type:vn}),S){me.current=window.setTimeout(M,300),S.post("presentation/refresh",{source:"manual",livePreviewEnabled:ae==="connected"||L==="connected"});return}M()},[L,ae,S]),_e=Zr(),Ce=h.useCallback(({id:M,type:W,path:N})=>{if(E.current.url)return{title:E.current.title||E.current.url,name:"edit",params:{id:M,path:N,type:W,inspect:es,workspace:_e.name,mode:ts,preview:x.preview}}},[x.preview,_e.name]),Ie=h.useCallback(M=>{R({},{viewport:M==="desktop"?void 0:"mobile"},!0)},[R]),$e=h.useCallback(M=>{R({},{perspective:M==="previewDrafts"?void 0:M})},[R]);return u.jsxs(u.Fragment,{children:[u.jsx(Ni,{devMode:b,name:c,navigate:R,params:x,searchParams:I,structureParams:A,children:u.jsx(ki,{navigate:R,children:u.jsx(zi,{params:x,children:u.jsx(Ba,{comlink:S,children:u.jsx(Wo,{height:"fill",children:u.jsxs(ni,{children:[u.jsx(he,{}),u.jsx(hn,{id:"preview",minWidth:325,defaultSize:fe?50:75,order:3,children:u.jsx(Q,{direction:"column",flex:1,height:"fill",ref:ve,children:u.jsx(ns,{element:pe,children:u.jsx(Sr,{canSharePreviewAccess:y,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,dispatch:$,header:p,iframe:k.iframe,initialUrl:g,loadersConnection:L,navigatorEnabled:fe,onPathChange:ce,onRefresh:Je,openPopup:B,overlaysConnection:se,previewUrl:x.preview,perspective:O,ref:w,setPerspective:$e,setViewport:Ie,targetOrigin:v,toggleNavigator:be,toggleOverlay:Y,viewport:z,visualEditing:k.visualEditing,vercelProtectionBypass:a},v)})})}),u.jsx($i,{documentId:x.id,documentsOnPage:q,documentType:x.type,getCommentIntent:Ce,mainDocumentState:Z,onFocusPath:X,onStructureParams:ee,searchParams:I,setDisplayedDocument:ie,structureParams:A})]})})})})})}),u.jsxs(h.Suspense,{children:[P&&(rs?u.jsx(Ao,{controller:P,perspective:O,liveDocument:J,onDocumentsOnPage:U,onLoadersConnection:ne}):u.jsx(ko,{controller:P,perspective:O,liveDocument:J,onDocumentsOnPage:U,onLoadersConnection:ne,documentsOnPage:q})),S&&x.id&&x.type&&u.jsx(Oo,{comlink:S,id:x.id,type:x.type,loadersConnection:L,previewKitConnection:ae}),S&&u.jsx(zo,{comlink:S,perspective:O}),S&&q.length>0&&u.jsx(Do,{comlink:S,perspective:O,refs:q}),S&&u.jsx(Mo,{comlink:S}),S&&u.jsx(Va,{comlink:S}),S&&u.jsx(Lo,{comlink:S,perspective:O}),S&&u.jsx(No,{comlink:S}),x.id&&x.type&&u.jsx(so,{documentId:x.id,documentRevision:x.rev,documentType:x.type,navigate:R,perspective:O})]})]})}function An(t){return t.key==="Alt"}const qo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Mn={alt:"altKey",ctrl:"ctrlKey",mod:qo?"metaKey":"ctrlKey",shift:"shiftKey"};function Vo(t,e){return t.every(n=>Mn[n]?e[Mn[n]]:e.key===n.toUpperCase())}function Fo(){const t=D.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:Rt},t[0]=e):e=t[0];const n=ct(e),[s,r]=h.useReducer(Bo,"loading"),[a,i]=h.useState(null);let o,c;t[1]!==n?(o=()=>{const p=Ua(n,d=>{i(d),r()});return()=>p()},c=[n],t[1]=n,t[2]=o,t[3]=c):(o=t[2],c=t[3]),h.useEffect(o,c);let l;return t[4]!==s||t[5]!==a?(l=[a,s],t[4]=s,t[5]=a,t[6]=l):l=t[6],l}function Bo(){return"ready"}function Ho(t){const e=D.c(17),{t:n}=Pe(Se),{previewUrl:s}=t.tool.options??{},{push:r}=Nn(),a=typeof s=="object"||typeof s=="function",i=Br(),[o,c]=h.useState(null),[l,p]=h.useState(null),[d,m]=h.useState(null),[f,g]=h.useState(null);let y,b;e[0]!==i||e[1]!==a?(y=()=>{if(!a)return;const x=i.checkDocumentPermission("create",{_id:Le,_type:Xe}).subscribe(c),I=i.checkDocumentPermission("update",{_id:Le,_type:Xe}).subscribe(p),A=i.checkDocumentPermission("read",{_id:Le,_type:Xe}).subscribe(m),R=i.checkDocumentPermission("create",{_id:`drafts.${zn()}`,_type:tn}).subscribe(g);return()=>{x.unsubscribe(),I.unsubscribe(),A.unsubscribe(),R.unsubscribe()}},b=[i,a],e[0]=i,e[1]=a,e[2]=y,e[3]=b):(y=e[2],b=e[3]),h.useEffect(y,b);const v=f==null?void 0:f.granted;let w,P;e[4]!==v||e[5]!==r||e[6]!==n||e[7]!==a?(w=()=>{if(!a||v!==!1)return;const x=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:n("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(x)},P=[v,r,n,a],e[4]=v,e[5]=r,e[6]=n,e[7]=a,e[8]=w,e[9]=P):(w=e[8],P=e[9]),h.useEffect(w,P);const[_,S]=Fo();if(S==="loading"||a&&(!o||typeof o.granted>"u"||!l||typeof l.granted>"u"||!f||!d||typeof d.granted>"u"||typeof f.granted>"u")){let x;return e[10]===Symbol.for("react.memo_cache_sentinel")?(x=u.jsx(Qn,{}),e[10]=x):x=e[10],x}const T=v===!0,E=(o==null?void 0:o.granted)===!0&&(l==null?void 0:l.granted)===!0,C=(d==null?void 0:d.granted)===!0;let j;return e[11]!==t||e[12]!==T||e[13]!==E||e[14]!==C||e[15]!==_?(j=u.jsx(Uo,{...t,vercelProtectionBypass:_,canCreateUrlPreviewSecrets:T,canToggleSharePreviewAccess:E,canUseSharedPreviewAccess:C}),e[11]=t,e[12]=T,e[13]=E,e[14]=C,e[15]=_,e[16]=j):j=e[16],j}const Zo=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"}));export{Zo as P,jn as a,Xs as b,wt as c,Qo as d,Xo as e,lr as g,Jo as p,Yo as r,Qs as t,et as w};
