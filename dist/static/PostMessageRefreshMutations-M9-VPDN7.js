import{r as m,b as E,bg as M,be as v,j as x}from"./sanity-BixSMB_v.js";function w(u){const t=E.c(8),{comlink:e,type:s,previewKitConnection:o,loadersConnection:a}=u;let r,d;t[0]!==u.id?(d=M(u.id),t[0]=u.id,t[1]=d):d=t[1],r=d;const n=r,{draft:l,published:i,ready:f}=v(n,s,"low"),_=o==="connected"||a==="connected";if(f&&l||i){let c;return t[2]!==e||t[3]!==l||t[4]!==n||t[5]!==_||t[6]!==i?(c=x.jsx(R,{comlink:e,draft:l,livePreviewEnabled:_,published:i},n),t[2]=e,t[3]=l,t[4]=n,t[5]=_,t[6]=i,t[7]=c):c=t[7],c}return null}function R(u){const t=E.c(14),{comlink:e,draft:s,published:o,livePreviewEnabled:a}=u,[r,d]=m.useState(s),[n,l]=m.useState(o);let i;t[0]!==e||t[1]!==s||t[2]!==a||t[3]!==(r==null?void 0:r._rev)||t[4]!==(n==null?void 0:n._rev)||t[5]!==o?(i=()=>{(r==null?void 0:r._rev)!==(s==null?void 0:s._rev)&&(m.startTransition(()=>d(s)),s&&(e==null||e.post("presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:g(s)}))),(n==null?void 0:n._rev)!==(o==null?void 0:o._rev)&&(m.startTransition(()=>l(o)),o&&(e==null||e.post("presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:g(o)})))},t[0]=e,t[1]=s,t[2]=a,t[3]=r==null?void 0:r._rev,t[4]=n==null?void 0:n._rev,t[5]=o,t[6]=i):i=t[6];const f=r==null?void 0:r._rev,_=n==null?void 0:n._rev;let c;return t[7]!==e||t[8]!==s||t[9]!==a||t[10]!==o||t[11]!==f||t[12]!==_?(c=[e,s,a,f,_,o],t[7]=e,t[8]=s,t[9]=a,t[10]=o,t[11]=f,t[12]=_,t[13]=c):c=t[13],m.useEffect(i,c),null}function g(u){const{_id:t,_type:e,_rev:s,slug:o}=u;return{_id:t,_type:e,_rev:s,slug:o}}var y=m.memo(w);export{y as default};
