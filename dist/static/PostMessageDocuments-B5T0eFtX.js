import{r as f,b as w,u as E,au as P,ai as l,cq as R,cr as D,cs as I}from"./sanity-BixSMB_v.js";const S=s=>{const e=w.c(13),{comlink:t}=s;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={apiVersion:P},e[0]=o):o=e[0];const n=E(o);let a,c;e[1]!==n||e[2]!==t?(a=()=>{const i=n.listen('*[!(_id in path("_.**"))]',{},{effectFormat:"mendoza",events:["welcome","mutation","reconnect"],includePreviousRevision:!1,includeResult:!1,tag:"presentation-documents",visibility:"transaction"}).pipe(l(q)),y=i.pipe(l(x),R({bufferSize:1,refCount:!1})),b=t.on("visual-editing/snapshot-welcome",async()=>({event:await new Promise(d=>{y.pipe(D()).subscribe(_=>{d(_)})})})),v=i.pipe(l(z)),g=i.pipe(l(C)),h=I(y,g,v).subscribe(d=>{t.post("presentation/snapshot-event",{event:d})});return()=>{b(),h.unsubscribe()}},c=[n,t],e[1]=n,e[2]=t,e[3]=a,e[4]=c):(a=e[3],c=e[4]),f.useEffect(a,c);let u,r;e[5]!==n||e[6]!==t?(u=()=>t.on("visual-editing/fetch-snapshot",async i=>({snapshot:await n.getDocument(i.documentId,{tag:"document.snapshots"})})),r=[n,t],e[5]=n,e[6]=t,e[7]=u,e[8]=r):(u=e[7],r=e[8]),f.useEffect(u,r);let m,p;return e[9]!==n||e[10]!==t?(m=()=>t.on("visual-editing/mutate",async i=>n.dataRequest("mutate",i,{visibility:"async",returnDocuments:!0})),p=[n,t],e[9]=n,e[10]=t,e[11]=m,e[12]=p):(m=e[11],p=e[12]),f.useEffect(m,p),null};var V=f.memo(S);function q(s){return s.type==="welcome"||s.type==="reconnect"||s.type==="mutation"}function x(s){return s.type==="welcome"}function z(s){return s.type==="reconnect"}function C(s){return s.type==="mutation"}export{V as default};
